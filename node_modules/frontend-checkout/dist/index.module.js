import t,{useRef as r,useState as e,useMemo as n,useCallback as o,useEffect as i}from"react";function a(){return(a=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}).apply(this,arguments)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,r){return(u=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t,r,e){return(d=s()?Reflect.construct:function(t,r,e){var n=[null];n.push.apply(n,r);var o=new(Function.bind.apply(t,n));return e&&u(o,e.prototype),o}).apply(null,arguments)}function f(t){var r="function"==typeof Map?new Map:void 0;return(f=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,e)}function e(){return d(t,arguments,c(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),u(e,t)})(t)}function l(t,r){if(null==t)return{};var e,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r.indexOf(e=i[n])>=0||(o[e]=t[e]);return o}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t,r){return r||(r=t.slice(0)),t.raw=r,t}var p,v,y,P,g,I,C,w,b,_,k,S,E,j=["shopify","big_commerce"],A=["graphql","rest","management"],T=/(query|mutation) ?([\w\d-_]+)? ?\(.*?\)? \{/;function F(t){var r=Array.isArray(t)?[].concat(t,[].slice.call(arguments,1)).join(""):t,e=T.exec(r);return function(t){var n={query:r};return t&&(n.variables=t),e&&e.length&&e[2]&&(n.operationName=e[2]),JSON.stringify(n)}}var D="\n  fragment ProductVariantPricePairConnectionFragment on ProductVariantPricePairConnection {\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n    }\n    edges {\n      node {\n        price {\n          amount\n          currencyCode\n        }\n        compareAtPrice {\n          amount\n          currencyCode\n        }\n      }\n    }\n  }\n",N="\n  fragment ImageConnectionFragment on ImageConnection {\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n    }\n    edges {\n      cursor\n      node {\n        id\n        src\n        altText\n      }\n    }\n  }\n",O="\n  fragment ProductVariantFragment on ProductVariant {\n    id\n    title\n    price\n    priceV2 {\n      amount\n      currencyCode\n    }\n    presentmentPrices(first: 20) {\n      ...ProductVariantPricePairConnectionFragment\n    }\n    weight\n    quantityAvailable\n    available: availableForSale\n    sku\n    compareAtPrice\n    compareAtPriceV2 {\n      amount\n      currencyCode\n    }\n    image {\n      id\n      src: originalSrc\n      altText\n    }\n    selectedOptions {\n      name\n      value\n    }\n    unitPrice {\n      amount\n      currencyCode\n    }\n    unitPriceMeasurement {\n      measuredType\n      quantityUnit\n      quantityValue\n      referenceUnit\n      referenceValue\n    }\n  }\n",q="\n  fragment ProductFragment on Product {\n    id\n    availableForSale\n    createdAt\n    updatedAt\n    descriptionHtml\n    description\n    handle\n    productType\n    title\n    vendor\n    publishedAt\n    onlineStoreUrl\n    options {\n      name\n      values\n    }\n    images(first: 250) {\n      ...ImageConnectionFragment\n    }\n    variants(first: 250) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        cursor\n        node {\n          ...ProductVariantFragment\n        }\n      }\n    }\n  }\n",x="\n  fragment UserErrorFragment on UserError {\n    field\n    message\n  }\n",U="\n  fragment CheckoutUserErrorFragment on CheckoutUserError {\n    field\n    message\n    code\n  }\n",V="\n  fragment DiscountApplicationFragment on DiscountApplication {\n    targetSelection\n    allocationMethod\n    targetType\n    value {\n      ... on MoneyV2 {\n        amount\n        currencyCode\n      }\n      ... on PricingPercentageValue {\n        percentage\n      }\n    }\n    ... on ManualDiscountApplication {\n      title\n      description\n    }\n    ... on DiscountCodeApplication {\n      code\n      applicable\n    }\n    ... on ScriptDiscountApplication {\n      description\n    }\n    ... on AutomaticDiscountApplication {\n      title\n    }\n  }\n",$="\n  fragment VariantWithProductFragment on ProductVariant {\n    ...ProductVariantFragment\n    product {\n      id\n      handle\n    }\n  }\n",R="\n  fragment CheckoutLineItemConnectionFragment on CheckoutLineItemConnection {\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n    }\n    edges {\n      cursor\n      node {\n        id\n        title\n        variant {\n          ...VariantWithProductFragment\n        }\n        quantity\n        customAttributes {\n          key\n          value\n        }\n        discountAllocations {\n          allocatedAmount {\n            amount\n            currencyCode\n          }\n          discountApplication {\n            ...DiscountApplicationFragment\n          }\n        }\n      }\n    }\n  }\n",M="\n  fragment CheckoutFragment on Checkout {\n    id\n    webUrl\n    subtotalPrice\n    subtotalPriceV2 {\n      amount\n      currencyCode\n    }\n    totalPriceV2 {\n      amount\n      currencyCode\n    }\n    lineItems(first: 250) {\n      ...CheckoutLineItemConnectionFragment\n    }\n    completedAt\n  }\n",L=F(p||(p=m(["\n  query Product($handle: String!) {\n    productByHandle(handle: $handle) {\n      ...ProductFragment\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"])),q,O,N,D),K=F(v||(v=m(["\n  query Product($id: ID!) {\n    node(id: $id) {\n      ...ProductFragment\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"])),q,O,N,D),z=F(y||(y=m(["\n  mutation CreateCheckout($input: CheckoutCreateInput!) {\n    checkoutCreate(input: $input) {\n      userErrors {\n        ...UserErrorFragment\n      }\n      checkoutUserErrors {\n        ...CheckoutUserErrorFragment\n      }\n      checkout {\n        ...CheckoutFragment\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),x,U,M,V,$,O,D,R),B=F(P||(P=m(["\n  query CheckoutLineItems($checkoutId: ID!, $pageSize: Int!, $cursor: String) {\n    node(id: $checkoutId) {\n      ... on Checkout {\n        lineItems(first: $pageSize, after: $cursor) {\n          ...CheckoutLIneItemConnectionFragment\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),R,V,$,O,N,D),H=F(g||(g=m(["\n  query Checkout($id: ID!) {\n    node(id: $id) {\n      ... on Checkout {\n        ...CheckoutFragment\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),M,V,$,O,D,R),J=F(I||(I=m(["\n  query PresentmentPrices($productVariantId: ID!, $pageSize: Int!, $cursor: String) {\n    node(id: $productVariantId) {\n      ... on ProductVariant {\n        presentmentPrices(first: $pageSize, after: $cursor) {\n          ...ProductVariantPricePairConnectionFragment\n        }\n      }\n    }\n  }\n  ","\n"])),D),Q=F(C||(C=m(["\n  query ProductImages($productId: ID!, $pageSize: Int!, $cursor: String) {\n    node(id: $productId) {\n      ... on Product {\n        images(first: $pageSize, after: $cursor) {\n          ...ImageConnectionFragment\n        }\n      }\n    }\n  }\n  ","\n"])),N),W=F(w||(w=m(["\n  query ProductVariant($id: ID!) {\n    node(id: $id) {\n      ... on ProductVariant {\n        ...VariantWithProductFragment\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"])),O,$,D),G=F(b||(b=m(["\n  query ProductVariants($productId: ID!, $pageSize: Int!, $cursor: String) {\n    node(id: $id) {\n      ... on Product {\n        variants(first: $pageSize, after: $cursor) {\n          ...ProductVariantFragment\n        }\n      }\n    }\n  }\n  ","\n  ","\n"])),O,D),X=F(_||(_=m(["\n  mutation RemoveCheckoutLineItems($checkoutId: ID!, $lineItemIds: [ID!]!) {\n    checkoutLineItemsRemove(checkoutId: $checkoutId, lineItemIds: $lineItemIds) {\n      userErrors {\n        ...UserErrorFragment\n      }\n      checkoutUserErrors {\n        ...CheckoutUserErrorFragment\n      }\n      checkout {\n        ...CheckoutFragment\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),x,U,M,V,$,O,D,R),Z=F(k||(k=m(["\n  mutation UpdateCheckoutLineItems($checkoutId: ID!, $lineItems: [CheckoutLineItemUpdateInput!]!) {\n    checkoutLineItemsUpdate(checkoutId: $checkoutId, lineItems: $lineItems) {\n      userErrors {\n        ...UserErrorFragment\n      }\n      checkoutUserErrors {\n        ...CheckoutUserErrorFragment\n      }\n      checkout {\n        ...CheckoutFragment\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),x,U,M,V,$,O,D,R),Y=F(S||(S=m(["\n  mutation AddCheckoutLineItems($checkoutId: ID!, $lineItems: [CheckoutLineItemInput!]!) {\n    checkoutLineItemsAdd(checkoutId: $checkoutId, lineItems: $lineItems) {\n      userErrors {\n        ...UserErrorFragment\n      }\n      checkoutUserErrors {\n        ...CheckoutUserErrorFragment\n      }\n      checkout {\n        ...CheckoutFragment\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),x,U,M,V,$,O,D,R),tt=F(E||(E=m(["\n  query getCurrencies {\n    shop {\n      paymentSettings {\n        enabledPresentmentCurrencies\n      }\n    }\n  }\n"])));function rt(t,r,e){if(!t.s){if(e instanceof nt){if(!e.s)return void(e.o=rt.bind(null,t,r));1&r&&(r=e.s),e=e.v}if(e&&e.then)return void e.then(rt.bind(null,t,r),rt.bind(null,t,2));t.s=r,t.v=e;var n=t.o;n&&n(t)}}var et=function(t,r){try{return Promise.resolve(it(t,r)).then(function(t){return t.flatMap(function(t){return t.edges.map(function(t){return t.node})})})}catch(t){return Promise.reject(t)}},nt=function(){function t(){}return t.prototype.then=function(r,e){var n=new t,o=this.s;if(o){var i=1&o?r:e;if(i){try{rt(n,1,i(this.v))}catch(t){rt(n,2,t)}return n}return this}return this.o=function(t){try{var o=t.v;1&t.s?rt(n,1,r?r(o):o):e?rt(n,1,e(o)):rt(n,2,o)}catch(t){rt(n,2,t)}},n},t}();function ot(t){return t instanceof nt&&1&t.s}var it=function(t,r){try{var e,n=[t],o=t;if(!o.pageInfo.hasNextPage)return Promise.resolve(n);var i=function(t,r,e){for(var n;;){var o=t();if(ot(o)&&(o=o.v),!o)return i;if(o.then){n=0;break}var i=e();if(i&&i.then){if(!ot(i)){n=1;break}i=i.s}}var a=new nt,c=rt.bind(null,a,2);return(0===n?o.then(s):1===n?i.then(u):(void 0).then(function(){(o=t())?o.then?o.then(s).then(void 0,c):s(o):rt(a,1,i)})).then(void 0,c),a;function u(r){i=r;do{if(!(o=t())||ot(o)&&!o.v)return void rt(a,1,i);if(o.then)return void o.then(s).then(void 0,c);ot(i=e())&&(i=i.v)}while(!i||!i.then);i.then(u).then(void 0,c)}function s(t){t?(i=e())&&i.then?i.then(u).then(void 0,c):u(i):rt(a,1,i)}}(function(){return!e&&!!o.pageInfo.hasNextPage},0,function(){var t=o.edges[o.edges.length-1];if(null!=t)return Promise.resolve(r(t.cursor)).then(function(t){null!=t?(n.push(t),o=t):e=1});e=1});return Promise.resolve(i&&i.then?i.then(function(){return n}):n)}catch(t){return Promise.reject(t)}},at=function(t,r){try{return Promise.resolve(ct(t,r)).then(function(r){return a({},r,{product:t.product})})}catch(t){return Promise.reject(t)}},ct=function(t,r){try{return Promise.resolve(et(t.presentmentPrices,function(e){return r.fetchPresentmentPricesPage(t.id,e)})).then(function(r){return a({},t,{presentmentPrices:r})})}catch(t){return Promise.reject(t)}},ut=function(t,r){try{return Promise.resolve(et(t.lineItems,function(e){return r.fetchCheckoutLineItemsPage(t.id,e)}).then(function(t){return t.map(function(t){return function(t,r){try{var e=function(r){return a({},t,{variant:r})};return Promise.resolve(null!=t.variant?Promise.resolve(at(t.variant,r)).then(e):e(null))}catch(t){return Promise.reject(t)}}(t,r)})}).then(function(t){return Promise.all(t)})).then(function(e){return a({},t,{checkoutUrl:dt(t.webUrl,r),lineItemCount:e.length,lineItems:e})})}catch(t){return Promise.reject(t)}},st=function(t,r){try{var e=et(t.images,function(e){return r.fetchProductImagesPage(t.id,e)}),n=et(t.variants,function(e){return r.fetchProductVariantsPage(t.id,e)}).then(function(t){return t.map(function(t){return ct(t,r)})}).then(function(t){return Promise.all(t)});return Promise.resolve(Promise.all([e,n])).then(function(r){return a({},t,{images:r[0],variants:r[1]})})}catch(t){return Promise.reject(t)}};function dt(t,r){var e=r.storeDomain,n=r.platformDomain;return null!=e&&null!=n?t.replace(n,e):t}function ft(t){var r,e;if(null!=(r=t.userErrors)&&r.length)throw new Error(JSON.stringify(t.userErrors));if(null!=(e=t.checkoutUserErrors)&&e.length)throw new Error(JSON.stringify(t.checkoutUserErrors));if(null==t||!t.checkout)throw new Error("The checkoutCreate mutation failed due to an unknown error.");return t.checkout}var lt=function(){function t(t){this.apiUrl=void 0,this.platformDomain=void 0,this.storeDomain=void 0,this.defaultHeaders=void 0;var r=t.storefrontAccessToken,e=t.storeDomain;this.platformDomain=t.platformDomain,this.storeDomain=e;var n=function(t,r){return r?"https://"+r:t?"https://"+t:""}(this.storeDomain,this.platformDomain);this.apiUrl=n+"/api/2021-07/graphql",this.defaultHeaders={"X-Shopify-Storefront-Access-Token":r,"Accept-Language":"*","Content-Type":"application/json",Accept:"application/json"}}var r=t.prototype;return r.fetchProductByHandle=function(t){try{var r=this,e=L({handle:t});return Promise.resolve(r.post(e)).then(function(t){return Promise.resolve(st(t.productByHandle,r))})}catch(t){return Promise.reject(t)}},r.fetchProduct=function(t){try{var r=this,e=K({id:t});return Promise.resolve(r.post(e)).then(function(t){return Promise.resolve(st(t.node,r))})}catch(t){return Promise.reject(t)}},r.createCart=function(t){try{var r=this,e=z({input:t||{}});return Promise.resolve(r.post(e)).then(function(t){var e=ft(t.checkoutCreate);return ut(e,r)})}catch(t){return Promise.reject(t)}},r.fetchCart=function(t){try{var r=this,e=H({id:t});return Promise.resolve(r.post(e)).then(function(t){return ut(t.node,r)})}catch(t){return Promise.reject(t)}},r.addCheckoutLineItems=function(t,r){try{var e=this,n=Y({checkoutId:t,lineItems:r});return Promise.resolve(e.post(n)).then(function(t){var r=ft(t.checkoutLineItemsAdd);return ut(r,e)})}catch(t){return Promise.reject(t)}},r.removeCheckoutLineItems=function(t,r){try{var e=this,n=X({checkoutId:t,lineItemIds:r});return Promise.resolve(e.post(n)).then(function(t){var r=ft(t.checkoutLineItemsRemove);return ut(r,e)})}catch(t){return Promise.reject(t)}},r.updateCheckoutLineItems=function(t,r){try{var e=this,n=Z({checkoutId:t,lineItems:r});return Promise.resolve(e.post(n)).then(function(t){var r=ft(t.checkoutLineItemsUpdate);return ut(r,e)})}catch(t){return Promise.reject(t)}},r.fetchProductVariant=function(t){try{var r=this,e=W({id:t});return Promise.resolve(r.post(e)).then(function(t){return at(t.node,r)})}catch(t){return Promise.reject(t)}},r.fetchCheckoutLineItemsPage=function(t,r,e){void 0===e&&(e=250);try{var n=B({checkoutId:t,pageSize:e,cursor:r});return Promise.resolve(this.post(n)).then(function(t){return t.node.lineItems})}catch(t){return Promise.reject(t)}},r.fetchProductImagesPage=function(t,r,e){void 0===e&&(e=250);try{var n=Q({productId:t,pageSize:e,cursor:r});return Promise.resolve(this.post(n)).then(function(t){return t.node.images})}catch(t){return Promise.reject(t)}},r.fetchProductVariantsPage=function(t,r,e){void 0===e&&(e=250);try{var n=G({productId:t,pageSize:e,cursor:r});return Promise.resolve(this.post(n)).then(function(t){return t.node.variants})}catch(t){return Promise.reject(t)}},r.fetchPresentmentPricesPage=function(t,r,e){void 0===e&&(e=250);try{var n=J({productVariantId:t,pageSize:e,cursor:r});return Promise.resolve(this.post(n)).then(function(t){return t.node.presentmentPrices})}catch(t){return Promise.reject(t)}},r.fetchCurrencies=function(){try{var t=tt();return Promise.resolve(this.post(t)).then(function(t){return t.shop.paymentSettings.enabledPresentmentCurrencies})}catch(t){return Promise.reject(t)}},r.post=function(t,r){try{return Promise.resolve((e=this.apiUrl,void 0===(n={headers:a({},this.defaultHeaders,r||{}),method:"POST",body:t})&&(n={}),new Promise(function(t,r){fetch(e,n).then(function(e){try{return Promise.resolve(function(n,o){try{var i=e.ok?Promise.resolve(e.json()).then(function(e){var n=e.data,o=e.errors;return null!=n?t(n):r(null!=o&&o.length?new Error(JSON.stringify(o)):new Error("The request failed with an unknown error"))}):r(new Error(e.statusText))}catch(t){return o(t)}return i&&i.then?i.then(void 0,o):i}(0,function(t){r(t)}))}catch(t){return Promise.reject(t)}},function(t){return r(t)})})))}catch(t){return Promise.reject(t)}var e,n},t}(),ht=function(t){var r,e;function n(r,e,o){var i;void 0===o&&(o="CheckoutError");var a=r+" "+(e?e.message:"");return(i=t.call(this,a)||this).name=void 0,i.message=void 0,i.stack=void 0,Object.setPrototypeOf(h(i),(this instanceof n?this.constructor:void 0).prototype),i.name=o,i.message=a,e?i.stack=e.stack:Error.captureStackTrace(h(i)),i}return e=t,(r=n).prototype=Object.create(e.prototype),r.prototype.constructor=r,u(r,e),n}(f(Error)),mt={development:{log:console.log,error:console.error},production:{log:function(t,r){},error:function(t,r){}},test:{log:console.log,error:console.error}}[process.env.NODE_ENV||"development"],pt=function(t){try{return Promise.resolve(mt.log(t)).then(function(){})}catch(t){return Promise.reject(t)}},vt=/^(gid):\/\/(shopify)\/(.*)\/([0-9]+)/i,yt=/^(?:[A-Za-z0-9+\\/]{4})*(?:[A-Za-z0-9+\\/]{2}(==)?|[A-Za-z0-9+\\/]{3}=?)?$/,Pt=function(t){return!isNaN(Number(t))};function gt(t){if("number"==typeof t)return!1;try{return bt(t),!0}catch(t){return!1}}function It(t){if(!t)throw new Error("id cannot be "+JSON.stringify(t));if("string"==typeof t&&yt.test(t)){var r=bt(t);return"Product"===r[0]?t:wt("Product",r[1])}if("string"==typeof t&&!Pt(t))throw new Error("id is a string and not a storefrontId. Is this a product handle?");return wt("Product",Number(t))}function Ct(t){if(!t)throw new Error("id cannot be "+JSON.stringify(t));if("string"==typeof t&&yt.test(t)){var r=bt(t);return"ProductVariant"===r[0]?t:wt("ProductVariant",r[1])}if("string"==typeof t&&!Pt(t))throw new Error("id is a string and not a storefrontId. Is this a product handle?");return wt("ProductVariant",Number(t))}function wt(t,r){return btoa("gid://shopify/"+t+"/"+r)}function bt(t){if(null==t)throw new Error("id cannot be "+t);if(!yt.test(t))throw new Error("id is a string and not a storefrontId. Is this a product handle?");var r=atob(t).match(vt);if(null==r||"string"!=typeof r[3]||!Pt(r[4]))throw new Error("id is a string and not a storefrontId. Is this a product handle?");return[r[3],Number(r[4])]}var _t=function(t,r){document.cookie=t+"="+r+";;Secure=true;SameSite=None"};function kt(t,r){var e=new URL(t.checkoutUrl).pathname;return{id:String(t.id),items:t.lineItems.map(function(r){var e,n,o,i;return a({},r,{variant_id:null==(e=r.variant)?void 0:e.id,selectedCurrencyPrice:null==(n=r.variant)||null==(o=n.presentmentPrices)||null==(i=o.find(function(r){return r.price.currencyCode===t.subtotalPriceV2.currencyCode}))?void 0:i.price.amount})}),currencyCode:t.subtotalPriceV2.currencyCode,subtotalPrice:t.subtotalPriceV2.amount,totalPrice:t.totalPriceV2.amount,checkoutUrl:r.storeDomain?"https://"+r.storeDomain+e:t.checkoutUrl}}function St(t,r){if(!function(t){return t&&"object"==typeof t}(t))throw Error((r||"props")+" is not an object.")}function Et(t){return"string"==typeof t}function jt(t){t.forEach(function(t){if(St(t,"item"),!t.id)throw Error('Please provide "id" property to every item.');if(!Et(t.id))throw Error('All items should have property "id" of type string.');if(!t.quantity)throw Error('Please provide "quantity" property for every item.')})}function At(t,r){try{var e=t()}catch(t){return r(t)}return e&&e.then?e.then(void 0,r):e}var Tt=function(){function t(t,r){this.client=void 0,this.storeDomain=void 0,this.storeName=void 0,this.cartKey=void 0,this.sharedCheckoutDomains=void 0,this.isSharedCheckout=void 0,this.client=new lt(t),this.storeDomain=t.storeDomain,this.storeName=r.storeName,this.cartKey="cartId-"+r.storeId,this.sharedCheckoutDomains=r.sharedCheckoutDomains||[],this.isSharedCheckout=this.sharedCheckoutDomains.length>0}var r=t.prototype;return r.getCartId=function(){try{var t,r=this,e=function(e){return t?e:Promise.resolve(r.createCart()).then(function(t){return t.id})},n=At(function(){function e(e){return t?e:function(){if(r.isSharedCheckout)return Promise.resolve((e=r.sharedCheckoutDomains,e.forEach(function(t){var r=document.querySelector('iframe[data-store-domain="'+t+'"]');r&&document.body.removeChild(r);var e=document.createElement("iframe");e.setAttribute("src",t+"/shogun-shared-checkout"),e.setAttribute("data-store-domain",t),e.setAttribute("title","Shared checkout on "+t),e.setAttribute("style","display:none"),document.body.appendChild(e)}),Promise.any(e.map(function(t){return new Promise(function(r,e){var n=!1;setTimeout(function(){return!n&&e()},1500),window.addEventListener("message",function o(i){if("shared checkout loaded"===i.data.message&&t===i.data.domain)return n=!0,window.removeEventListener("message",o),i.data.cartId?r({sharedCartId:i.data.cartId}):e()})})})))).then(function(e){var n=e.sharedCartId;if(n)return t=1,function(t,r){return _t(t,r),localStorage.setItem(t,r),r}(r.cartKey,n)});var e}()}var n=localStorage.getItem(r.cartKey),o=function(){if(n)return Promise.resolve(r.client.fetchCart(n)).then(function(r){if(r)return t=1,n})}();return o&&o.then?o.then(e):e(o)},function(){});return Promise.resolve(n&&n.then?n.then(e):e(n))}catch(t){return Promise.reject(t)}},r.fetchProduct=function(t){try{var r=this;try{if("string"==typeof t&&!gt(t))return Promise.resolve(r.client.fetchProductByHandle(t));var e=r.getItemIdInPlatformSpecificFormat(t);return Promise.resolve(r.client.fetchProduct(e))}catch(t){var n=new ht("Fetching product by id failed.",t);throw pt(n),n}}catch(t){return Promise.reject(t)}},r.fetchProductVariant=function(t){try{try{var r=this.getItemIdInPlatformSpecificFormat(t,"ProductVariant");return Promise.resolve(this.client.fetchProductVariant(r))}catch(t){var e=new ht("Fetching product variant by id failed.",t);throw pt(e),e}}catch(t){return Promise.reject(t)}},r.fetchCurrencies=function(){try{try{return Promise.resolve(this.client.fetchCurrencies())}catch(r){var t=new ht("Fetching currencies failed.",r);throw pt(t),t}}catch(t){return Promise.reject(t)}},r.selectCurrency=function(t){try{try{return function(t){if(St(t,"props"),!t.currency)throw Error('Please provide "currency" property');if("string"!=typeof t.currency)throw Error("Currency is not type of string");t.lineItems&&(function(t,r){if(!function(t){return Array.isArray(t)}(t))throw Error("items is not an object.")}(t.lineItems),t.lineItems.forEach(function(t){if(St(t,"lineItem"),!t.variantId)throw Error('Please provide "variantId" property to every lineItem.');if(!Et(t.variantId))throw Error('All lineItems should have property "variantId" of type string.');if(!t.quantity)throw Error('Please provide "quantity" property for every lineItem.')}))}(t),Promise.resolve(this.createCart({lineItems:t.lineItems,presentmentCurrencyCode:t.currency}))}catch(t){var r=new ht("Selecting currency failed.",t);throw pt(r),r}}catch(t){return Promise.reject(t)}},r.createCart=function(t){try{var r=this;return Promise.resolve(At(function(){return Promise.resolve(r.client.createCart(t)).then(function(t){if(!t)throw Error("No cart retrieved from API.");try{localStorage.setItem(r.cartKey,String(t.id)),r.isSharedCheckout&&(_t(r.cartKey,String(t.id)),e=r.sharedCheckoutDomains,n=String(t.id),e.forEach(function(t){var r=document.querySelector('iframe[data-store-domain="'+t+'"]');r&&r.contentWindow&&r.contentWindow.postMessage({message:"save new cartId",cartId:n},t)}))}catch(t){}var e,n;return kt(t,{storeDomain:r.storeDomain})})},function(t){var r=new ht("Creating cart failed.",t);throw pt(r),r}))}catch(t){return Promise.reject(t)}},r.addItemsToCart=function(t){try{var r=this;return Promise.resolve(r.getCartId()).then(function(e){return At(function(){var n=t.map(function(t){var e=t.id;return a({},l(t,["id"]),{id:r.getItemIdInPlatformSpecificFormat(e,"ProductVariant")})}),o=function(t){return t.map(function(t){var r=t.id,e=l(t,["id"]);return a({variantId:gt(r)?r:Ct(r)},e)})}(n);return jt(n),Promise.resolve(r.client.addCheckoutLineItems(e,o)).then(function(t){return t.completedAt?r.createCart():kt(t,{storeDomain:r.storeDomain})})},function(t){var r=new ht("Adding items to cart failed.",t);throw pt(r),r})})}catch(t){return Promise.reject(t)}},r.updateItemsInCart=function(t){try{var r=this;return Promise.resolve(r.getCartId()).then(function(e){return At(function(){var n=t.map(function(t){var e=t.id;return a({},l(t,["id"]),{id:r.getItemIdInPlatformSpecificFormat(e)})});return jt(n),Promise.resolve(r.client.updateCheckoutLineItems(e,n)).then(function(t){return t.completedAt?r.createCart():kt(t,{storeDomain:r.storeDomain})})},function(t){var r=new ht("Updating items in cart failed.",t);throw pt(r),r})})}catch(t){return Promise.reject(t)}},r.removeItemsFromCart=function(t){try{var r=this;return Promise.resolve(r.getCartId()).then(function(e){return At(function(){return t.forEach(function(t){if(!Et(t))throw Error("All ids should be type of string.")}),Promise.resolve(r.client.removeCheckoutLineItems(e,t)).then(function(t){return t.completedAt?r.createCart():kt(t,{storeDomain:r.storeDomain})})},function(t){var r=new ht("Removing items from cart failed.",t);throw pt(r),r})})}catch(t){return Promise.reject(t)}},r.getCart=function(){try{var t=this;return Promise.resolve(t.getCartId()).then(function(r){return At(function(){return Promise.resolve(t.client.fetchCart(r)).then(function(r){return!r||null!=r&&r.completedAt?t.createCart():kt(r,{storeDomain:t.storeDomain})})},function(t){var r=new ht("Getting cart failed.",t);throw pt(r),r})})}catch(t){return Promise.reject(t)}},r.getProductTrackingData=function(t){if(!function(t){return"string"==typeof t.id}(t))throw new ht('Not valid "item" provided to getProductTrackingData method.');return t.variant?{id:t.variant.sku||t.id.toString(),name:t.title,brand:this.storeName,variant:t.variant.title||"",price:parseFloat(t.variant.price||"0"),compareAtPrice:parseFloat(t.variant.compareAtPrice||"0"),quantity:t.quantity}:{id:String(t.id),name:t.title,brand:this.storeName,quantity:t.quantity,price:0}},r.getItemIdInPlatformSpecificFormat=function(t,r){return void 0===r&&(r="Product"),gt(t)?t:{Product:It(t),ProductVariant:Ct(t)}[r]},t}();function Ft(t){return Array.isArray(t)?t:[t]}var Dt=function(){function t(t){var r=t.platform;this.platform=void 0,this.platform=r}var r=t.prototype;return r.fetchProduct=function(t){if(!this.platform.fetchProduct)throw new Error("Operation not supported by the selected platform.");return this.platform.fetchProduct(t)},r.fetchProductVariant=function(t){if(!this.platform.fetchProductVariant)throw new Error("Operation not supported by the selected platform.");return this.platform.fetchProductVariant(t)},r.fetchCurrencies=function(){if(!this.platform.fetchCurrencies)throw new Error("Operation not supported by the selected platform.");return this.platform.fetchCurrencies()},r.selectCurrency=function(t){if(!this.platform.selectCurrency)throw new Error("Operation not supported by the selected platform.");return this.platform.selectCurrency(t)},r.addItemsToCart=function(t){var r=Ft(t);return this.platform.addItemsToCart(r)},r.updateItemsInCart=function(t){try{var r=Ft(t);return Promise.resolve(this.platform.updateItemsInCart(r))}catch(t){return Promise.reject(t)}},r.removeItemsFromCart=function(t){try{var r=Ft(t);return Promise.resolve(this.platform.removeItemsFromCart(r))}catch(t){return Promise.reject(t)}},r.updateCart=function(t){try{if(!this.platform.updateCart)throw new Error("Operation not supported by the selected platform.");return Promise.resolve(this.platform.updateCart(t))}catch(t){return Promise.reject(t)}},r.getCart=function(){try{return Promise.resolve(this.platform.getCart())}catch(t){return Promise.reject(t)}},r.addShippingAddress=function(t){try{if(!this.platform.addShippingAddress)throw new Error("Operation not supported by the selected platform.");return Promise.resolve(this.platform.addShippingAddress(t))}catch(t){return Promise.reject(t)}},r.updateShippingAddress=function(t){try{if(!this.platform.updateShippingAddress)throw new Error("Operation not supported by the selected platform.");return Promise.resolve(this.platform.updateShippingAddress(t))}catch(t){return Promise.reject(t)}},r.getProductTrackingData=function(t){return this.platform.getProductTrackingData(t)},r.getItemIdInPlatformSpecificFormat=function(t,r){return this.platform.getItemIdInPlatformSpecificFormat(t,r)},t}(),Nt=function(t){return r=t,["storeDomain","storeToken","storePlatformDomain"].every(function(t){return function(t,r){return r in t}(r,t)});var r},Ot=function(t){try{var r,e=function(e){if(t.ok)return r;throw r},n=function(e,n){try{var o=Promise.resolve(t.json()).then(function(t){r=t})}catch(t){return n(t)}return o&&o.then?o.then(void 0,n):o}(0,function(r){throw new ht("Cart action failed: "+t.statusText+" ("+t.status+")",r)});return Promise.resolve(n&&n.then?n.then(e):e())}catch(t){return Promise.reject(t)}},qt=function(t){try{return Promise.resolve(fetch(t)).then(Ot)}catch(t){return Promise.reject(t)}},xt=function(t,r){try{return Promise.resolve(fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).then(Ot)}catch(t){return Promise.reject(t)}};function Ut(t){return"number"==typeof t}function Vt(t){t.forEach(function(t){if(!t.id)throw Error('Please provide "id" property to every item.');if(!Ut(t.id))throw Error('All items should have property "id" of type number.');!function(t){if("number"!=typeof t.quantity)throw Error('"quantity" is not type of number.')}(t)})}function $t(t){return{id:String(t.token),currencyCode:t.currency,subtotalPrice:t.items_subtotal_price,totalPrice:t.original_total_price,items:t.items.map(function(t,r){return a({},t,{variant:{id:t.variant_id},line:r+1})}),checkoutUrl:"/checkout",attributes:t.attributes,note:t.note}}function Rt(t,r){try{var e=t()}catch(t){return r(t)}return e&&e.then?e.then(void 0,r):e}var Mt=function(){function t(t){this.storeName=void 0,this.storeName=t.storeName}var r=t.prototype;return r.fetchProduct=function(t){try{return Promise.resolve(Rt(function(){return function(t){if("string"!=typeof t)throw Error('"handle" is not type of string.')}(t),Promise.resolve(qt(function(t){return"/products/"+t+".js"}(t)))},function(t){throw pt(t),t}))}catch(t){return Promise.reject(t)}},r.fetchProductVariant=function(t){try{var r=this;return Promise.resolve(Rt(function(){var e=r.getItemIdInPlatformSpecificFormat(t);return Promise.resolve(qt(function(t){return"/variants/"+t+".js"}(e)))},function(t){var r=new ht("Fetching product variant failed.",t);throw pt(r),r}))}catch(t){return Promise.reject(t)}},r.addItemsToCart=function(t){try{var r=this;return Promise.resolve(Rt(function(){var e=t.map(function(t){var e=t.id;return a({},l(t,["id"]),{id:r.getItemIdInPlatformSpecificFormat(e)})});return Vt(e),Promise.resolve(xt("/cart/add.js",{items:e})).then(function(){return Promise.resolve(qt("/cart.js")).then($t)})},function(t){throw pt(t),t}))}catch(t){return Promise.reject(t)}},r.updateItemsInCart=function(t){try{var r=this;return Promise.resolve(Rt(function(){function e(){return Promise.resolve(qt("/cart.js")).then($t)}var n=t[0];!function(t){if(!t)throw Error("Please provide item.");if(!t.id&&"number"!=typeof t.line)throw Error("Please provide valid item.")}(n);var o,i=(o=n)&&"object"==typeof o&&"line"in o,c=function(){if(i)return Promise.resolve(xt("/cart/change.js",n)).then(function(){});var e=t.map(function(t){var e=t.id;return a({},l(t,["id"]),{id:r.getItemIdInPlatformSpecificFormat(e)})});Vt(e);var o=e.reduce(function(t,r){return t[r.id]=r.quantity,t},{});return Promise.resolve(xt("/cart/update.js",{updates:o})).then(function(){})}();return c&&c.then?c.then(e):e()},function(t){throw pt(t),t}))}catch(t){return Promise.reject(t)}},r.removeItemsFromCart=function(t){try{var r=this;return Promise.resolve(Rt(function(){var e=t.map(function(t){return r.getItemIdInPlatformSpecificFormat(t)});e.forEach(function(t){if(!Ut(t))throw Error('All items should have property "id" of type number.')});var n=e.reduce(function(t,r){return t[r]=0,t},{});return Promise.resolve(xt("/cart/update.js",{updates:n})).then(function(){return Promise.resolve(qt("/cart.js")).then($t)})},function(t){throw pt(t),t}))}catch(t){return Promise.reject(t)}},r.updateCart=function(t){var r=t.items,e=t.note,n=t.attributes;try{var o=this;return Promise.resolve(Rt(function(){var t;if(null!=r&&r.length){var i=r.map(function(t){var r=t.id;return a({},l(t,["id"]),{id:o.getItemIdInPlatformSpecificFormat(r)})});Vt(i),t=i.reduce(function(t,r){var e;return a({},t,((e={})[r.id]=r.quantity,e))},{})}return Promise.resolve(xt("/cart/update.js",{updates:t,note:e,attributes:n})).then(function(){return Promise.resolve(qt("/cart.js")).then($t)})},function(t){throw pt(t),t}))}catch(t){return Promise.reject(t)}},r.getCart=function(){try{return Promise.resolve(Rt(function(){return Promise.resolve(qt("/cart.js")).then($t)},function(t){throw pt(t),t}))}catch(t){return Promise.reject(t)}},r.getProductTrackingData=function(t){if(!function(t){return"number"==typeof t.id}(t))throw new ht('Not valid "item" provided to getProductTrackingData method.');return{id:t.id,variantId:t.variant_id,name:t.title,brand:this.storeName,quantity:t.quantity,price:t.price||0}},r.getItemIdInPlatformSpecificFormat=function(t){return function(t){if(!t)throw new Error("id cannot be "+JSON.stringify(t));return"number"==typeof t?t:bt(t)[1]}(t)},t}(),Lt=function(t){try{if(!t.ok)throw Error(t.statusText+" ("+t.status+")");return Promise.resolve(function(r,e){try{var n=Promise.resolve(t.json())}catch(t){return e()}return n&&n.then?n.then(void 0,e):n}(0,function(){return t}))}catch(t){return Promise.reject(t)}},Kt=function(t){var r;return(null==(r=document.cookie.match("(^|;)\\s*"+t+"\\s*=\\s*([^;]+)"))?void 0:r.pop())||""},zt=function(t){return function(r,e){try{return Promise.resolve(fetch(r,{method:t,headers:{Accept:"application/json","Content-Type":"application/json","x-xsrf-token":Kt("XSRF-TOKEN")},body:JSON.stringify(e)})).then(Lt)}catch(t){return Promise.reject(t)}}},Bt={get:zt("GET"),post:zt("POST"),put:zt("PUT"),delete:zt("DELETE")},Ht="include=lineItems.digitalItems.options,lineItems.physicalItems.options",Jt=function(t){return t?"/api/storefront/carts/"+t+"?"+Ht:"/api/storefront/carts?"+Ht},Qt=function(t,r){return"/api/storefront/carts/"+t+"/items/"+r+"?"+Ht},Wt=function(t){return"string"==typeof t},Gt=function(t){if(!t.id)throw Error('Please provide the "id" property for every item.');if("number"!=typeof t.id)throw Error('All items should have a "id" property of type number.');if(!t.quantity)throw Error('Please provide the "quantity" property for every item.');if(t.quantity<1)throw Error('Please provide the "quantity" property more than 0.');return t},Xt=function(t){var r=t.id,e=t.sku,n=t.productId,o=t.options,i=l(t,["id","sku","productId","options"]);return a({id:n,SKU:e,lineItemId:r,optionSelections:o?o.map(function(t){return{optionId:t.nameId,optionValue:t.valueId}}):o},i)},Zt=function(t){return{id:t.id,currencyCode:t.cart.currency.code,subtotalPrice:t.subtotal,totalPrice:t.grandTotal,discountAmount:t.cart.discountAmount,taxTotal:t.taxTotal,coupons:t.coupons,giftCertificates:t.giftCertificates,items:[].concat(t.cart.lineItems.physicalItems.map(Xt),t.cart.lineItems.customItems.map(Xt),t.cart.lineItems.digitalItems.map(Xt)),checkoutUrl:"/checkout"}},Yt=function(t){return{id:t.lineItemId,productId:t.id,variantId:t.variantId,quantity:t.quantity,optionSelections:t.optionSelections}};function tr(t,r){try{var e=t()}catch(t){return r(t)}return e&&e.then?e.then(void 0,r):e}var rr=function(){function t(t){this.storeName=void 0,this.cartId=void 0,this.addToCartInitialRequest=void 0,this.storeName=t.storeName||""}var r=t.prototype;return r.getRestApiToken=function(){try{var t="XSRF-TOKEN",r=Kt(t);return r?Promise.resolve(r):Promise.resolve(Bt.get("/api/storefront/carts")).then(function(){return Kt(t)})}catch(t){return Promise.reject(t)}},r.getCheckout=function(t){try{var r=this;return Promise.resolve(tr(function(){return Promise.resolve(Bt.get(function(t){return"/api/storefront/checkouts/"+t+"?include=cart.lineItems.digitalItems.options,cart.lineItems.physicalItems.options"}(t))).then(Zt)},function(){return r.cartId=void 0,r.getCart()}))}catch(t){return Promise.reject(t)}},r.getCart=function(){try{var t=this;return Promise.resolve(t.cartId?t.getCheckout(t.cartId):tr(function(){return Promise.resolve(Bt.get(Jt())).then(function(r){var e=(r||[])[0];return t.cartId=null==e?void 0:e.id,null!=e&&e.id?t.getCheckout(t.cartId):{id:"",currencyCode:"",checkoutUrl:"/checkout",subtotalPrice:0,totalPrice:0,discountAmount:0,items:[]}})},function(t){var r=new ht("Getting cart failed.",t);throw pt(r),r}))}catch(t){return Promise.reject(t)}},r.addItemsToCart=function(t){try{var r=this;return Promise.resolve(tr(function(){function e(){var e;return Promise.resolve(r.getRestApiToken()).then(function(){function n(){return r.cartId?r.getCheckout(r.cartId):{id:(t=e).id,currencyCode:t.currency.code,subtotalPrice:t.baseAmount,totalPrice:t.cartAmount,discountAmount:t.discountAmount,items:[].concat(t.lineItems.physicalItems.map(Xt),t.lineItems.customItems.map(Xt),t.lineItems.digitalItems.map(Xt)),checkoutUrl:"/checkout"};var t}var o,i=r.cartId?Promise.resolve(Bt.post((o=r.cartId,"/api/storefront/carts/"+o+"/items?"+Ht),{lineItems:t.map(Yt)})).then(function(t){e=t}):(r.addToCartInitialRequest=Bt.post(Jt(),{lineItems:t.map(Yt)}).then(function(t){return r.cartId=null==t?void 0:t.id,t}),Promise.resolve(r.addToCartInitialRequest).then(function(t){e=t,r.addToCartInitialRequest=null}));return i&&i.then?i.then(n):n()})}!function(t){t.forEach(Gt)}(t);var n=function(){if(r.addToCartInitialRequest)return Promise.resolve(r.addToCartInitialRequest).then(function(){})}();return n&&n.then?n.then(e):e()},function(t){var r=new ht("Adding items to cart failed.",t);throw pt(r),r}))}catch(t){return Promise.reject(t)}},r.updateItemsInCart=function(t){try{var r=this;return Promise.resolve(tr(function(){if(function(t){if(t.length>1)throw Error("The REST API does not support batch update operations on the Cart resource.");t.forEach(function(t){return function(t){if(!t.lineItemId)throw Error('Please provide the "lineItemId" property for every item.');if(!Wt(t.lineItemId))throw Error('All items should have a "lineItemId" property of type string.');return t}(Gt(t))})}(t),!r.cartId)throw"Missing Cart Id";var e=Yt(t[0]);return Promise.resolve(r.getRestApiToken()).then(function(){return Promise.resolve(Bt.put(Qt(r.cartId,e.id),{lineItem:e})).then(function(){return r.getCart()})})},function(t){var r=new ht("Update cart item failed.",t);throw pt(r),r}))}catch(t){return Promise.reject(t)}},r.removeItemsFromCart=function(t){try{var r=this;return Promise.resolve(tr(function(){if(function(t){if(t.length>1)throw Error("The REST API does not support batch delete operations on the Cart resource.");if(!t.every(Wt))throw Error('All items should have a "lineItemId" property of type string')}(t),!r.cartId)throw"Missing Cart Id";var e=t[0];return Promise.resolve(r.getRestApiToken()).then(function(){return Promise.resolve(Bt.delete(Qt(r.cartId,e))).then(function(){return r.getCart()})})},function(t){var r=new ht("Removing items to cart failed.",t);throw pt(r),r}))}catch(t){return Promise.reject(t)}},r.getProductTrackingData=function(t){return Gt(t),{id:t.id,quantity:t.quantity,brand:this.storeName,variantId:t.variantId,name:t.name,price:t.listPrice}},r.getItemIdInPlatformSpecificFormat=function(t){if("number"==typeof t)return t;var r=Number(t);if(!isNaN(r))throw Error("itemId is not type of number and cannot be converted to a number");return r},t}(),er=function(t){try{return t.ok?Promise.resolve(t.text()).then(function(t){try{return JSON.parse(t).data}catch(r){return t}}):Promise.resolve({status:t.status})}catch(t){return Promise.reject(t)}},nr=function(t){return function(r,e){try{return Promise.resolve(fetch(r,{method:t,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})).then(er)}catch(t){return Promise.reject(t)}}},or={get:nr("GET"),post:nr("POST"),put:nr("PUT"),delete:nr("DELETE")},ir="?include=cart.line_items.physical_items.options,cart.line_items.digital_items.options,consignments.available_shipping_options",ar=function(t){return t?"/v3/carts/"+t+"?include=redirect_urls":"/v3/carts?include=redirect_urls"},cr=function(t,r){return"/v3/carts/"+t+"/items/"+r+"?include=redirect_urls"},ur=function(t,r){return r?"/v3/checkouts/"+t+"/consignments/"+r+ir:"/v3/checkouts/"+t+"/consignments"+ir},sr=function(t){return"string"==typeof t},dr=function(t){return"object"==typeof t&&null!==t},fr=function(t){if(!t.id)throw Error('Please provide the "id" property for every item.');if("number"!=typeof t.id)throw Error('All items should have a "id" property of type number.');if(!t.quantity)throw Error('Please provide the "quantity" property for every item.');return t},lr=function(t,r){return Object.keys(t).filter(function(t){return!r.includes(t)}).join(", ")},hr=function(t){var r=t.props,e=t.actionName,n=t.availableProps;if(!dr(r))throw Error(e+" properties are not type of object.");if(!Object.keys(r).length)throw Error(e+" properties are empty object.");var o=lr(r,n);if(o)throw Error(e+' properties "'+o+'" are not allowed.')},mr=["countryCode","city","state","stateCode","email","firstName","lastName","address1","postalCode","phone"],pr=function(t){if(!dr(t))throw Error("ShippingAddress is not type of object.");if(!Object.keys(t).length)throw Error("ShippingAddress is empty object.");var r=lr(t,mr);if(r)throw Error('ShippingAddress properties "'+r+'" are not allowed.')},vr=function(t){var r;return{id:t.lineItemId,product_id:t.id,variant_id:t.variantId,quantity:t.quantity,option_selections:null==(r=t.optionSelections)?void 0:r.map(function(t){return{option_id:t.optionId,option_value:t.optionValue}})}},yr=function(t){var r=t.id,e=t.sku,n=t.product_id,o=t.list_price,i=t.sale_price,c=t.variant_id,u=t.image_url,s=t.coupon_amount,d=t.discount_amount,f=t.discounts,h=t.options,m=t.extended_list_price,p=t.extended_sale_price,v=t.is_mutable,y=t.is_require_shipping,P=t.parent_id,g=t.taxable,I=l(t,["id","sku","product_id","list_price","sale_price","variant_id","image_url","coupon_amount","discount_amount","discounts","options","extended_list_price","extended_sale_price","is_mutable","is_require_shipping","parent_id","taxable"]);return a({id:n,SKU:e,lineItemId:r,listPrice:o,salePrice:i,variantId:c,imageUrl:u,couponAmount:s,discountAmount:d,discounts:null==f?void 0:f.map(function(t){return{id:t.id,discountedAmount:t.discounted_amount}}),extendedListPrice:m,extendedSalePrice:p,isMutable:v,isShippingRequired:y,isTaxable:g,parentId:P,optionSelections:h?h.map(function(t){return{optionId:t.name_id,optionValue:t.value_id}}):h},I)},Pr=function(t){return{id:t.id,type:t.type,description:t.description,imageUrl:t.image_url,cost:t.cost,transitTime:t.transit_time,additionalDescription:t.additional_description}},gr=function(t){return{id:t.id,first_name:t.firstName,last_name:t.lastName,email:t.email,address1:t.address1,city:t.city,state_or_province:t.state,state_or_province_code:t.stateCode,country_code:t.countryCode,postal_code:t.postalCode,phone:t.phone}},Ir=function(t){return{item_id:t.id,quantity:t.quantity}};function Cr(t,r){try{var e=t()}catch(t){return r(t)}return e&&e.then?e.then(void 0,r):e}var wr,br,_r=function(){function t(t){this.storeName=void 0,this.cartKey=void 0,this.cartId=void 0,this.cartKey="cartId-"+(t.storeId||""),this.storeName=t.storeName||"",this.cartId="undefined"!=typeof window?localStorage.getItem(this.cartKey):null}var r=t.prototype;return r.setCartId=function(t){t?localStorage.setItem(this.cartKey,t):localStorage.removeItem(this.cartKey),this.cartId=t},r.updateCustomerIdInCart=function(){try{var t=this;return Promise.resolve(Cr(function(){if(!t.cartId)throw"Missing Cart Id";var r=ar(t.cartId);return Promise.resolve(or.put(r,{})).then(function(){})},function(t){var r=new ht("Add customer id to cart failed.",t);throw pt(r),r}))}catch(t){return Promise.reject(t)}},r.getCheckout=function(){try{var t=this;return Promise.resolve(or.get("/v3/checkouts/"+t.cartId+ir)).then(function(r){return 404===(null==r?void 0:r.status)?(t.setCartId(null),t.getCart()):{id:(e=a({},r,{cart:a({},r.cart,{redirect_urls:{checkout_url:"/checkout?cartId="+t.cartId}})})).id,currencyCode:e.cart.currency.code,subtotalPrice:e.cart.base_amount,totalPrice:e.grand_total,discountAmount:e.cart.discount_amount,consignment:null!=(n=e.consignments)&&n.length?(o=e.consignments[0],{id:o.id,shippingAddress:{id:o.shipping_address.id,firstName:o.shipping_address.first_name,lastName:o.shipping_address.last_name,email:o.shipping_address.email,company:o.shipping_address.company,address1:o.shipping_address.address1,address2:o.shipping_address.address2,city:o.shipping_address.city,state:o.shipping_address.state_or_province,stateCode:o.shipping_address.state_or_province_code,countryCode:o.shipping_address.country_code,postalCode:o.shipping_address.postal_code,phone:o.shipping_address.phone,customFields:o.shipping_address.custom_fields.map(function(t){return{id:t.field_id,value:t.field_value}})},availableShippingOptions:o.available_shipping_options.map(Pr),selectedShippingOption:o.selected_shipping_option?Pr(o.selected_shipping_option):null,couponDiscounts:o.coupon_discounts,discounts:o.discounts,shippingCostIncTax:o.shipping_cost_inc_tax,shippingCostExTax:o.shipping_cost_ex_tax,handlingCostIncTax:o.handling_cost_inc_tax,handlingCostExTax:o.handling_cost_ex_tax,lineItemIds:o.line_item_ids}):null,items:[].concat(e.cart.line_items.physical_items.map(yr),e.cart.line_items.custom_items.map(yr),e.cart.line_items.digital_items.map(yr),e.cart.line_items.gift_certificates.map(yr)),checkoutUrl:e.cart.redirect_urls.checkout_url,taxTotal:e.tax_total,coupons:e.coupons.map(function(t){return{id:t.id,code:t.code,couponType:t.coupon_type,discountedAmount:t.discounted_amount}})};var e,n,o})}catch(t){return Promise.reject(t)}},r.getCart=function(){try{var t=this;return Promise.resolve(Cr(function(){function r(r){return t.getCheckout()}var e=ar(t.cartId),n=function(){if(!t.cartId)return Promise.resolve(or.post(e,{line_items:[]})).then(function(r){if(null==r||!r.id)throw"Missing Cart Id";return t.setCartId(r.id),Promise.resolve(t.updateCustomerIdInCart()).then(function(){})})}();return n&&n.then?n.then(r):r()},function(t){var r=new ht("Getting cart failed.",t);throw pt(r),r}))}catch(t){return Promise.reject(t)}},r.addItemsToCart=function(t){try{var r=this;return Promise.resolve(Cr(function(){!function(t){t.forEach(fr)}(t);var e,n=(e=r.cartId)?"/v3/carts/"+e+"/items?include=redirect_urls":"/v3/carts?include=redirect_urls";return Promise.resolve(or.post(n,{line_items:t.map(vr)})).then(function(t){function e(){return r.getCheckout()}if(null==t||!t.id)throw"Missing Cart Id";var n=function(){if(!r.cartId)return r.setCartId(t.id),Promise.resolve(r.updateCustomerIdInCart()).then(function(){})}();return n&&n.then?n.then(e):e()})},function(t){var r=new ht("Adding items to cart failed",t);throw pt(r),r}))}catch(t){return Promise.reject(t)}},r.updateItemsInCart=function(t){try{var r=this;return Promise.resolve(Cr(function(){if(function(t){if(t.length>1)throw Error("The Management API does not support batch update operations on the Cart resource.");t.forEach(function(t){return function(t){if(!t.lineItemId)throw Error('Please provide the "lineItemId" property for every item.');if(!sr(t.lineItemId))throw Error('All items should have a "lineItemId" property of type string.');return t}(fr(t))})}(t),!r.cartId)throw"Missing Cart Id";var e=vr(t[0]),n=cr(r.cartId,e.id);return Promise.resolve(or.put(n,{line_item:e})).then(function(){return r.getCheckout()})},function(t){var r=new ht("Updating items in cart failed",t);throw pt(r),r}))}catch(t){return Promise.reject(t)}},r.removeItemsFromCart=function(t){try{var r=this;return Promise.resolve(Cr(function(){if(function(t){if(t.length>1)throw Error("The Management API does not support batch delete operations on the Cart resource.");if(!t.every(sr))throw Error('All items should have a "lineItemId" property of type string')}(t),!r.cartId)throw"Missing Cart Id";var e=cr(r.cartId,t[0]);return Promise.resolve(or.delete(e)).then(function(t){return t?r.getCheckout():(r.setCartId(null),r.getCart())})},function(t){var r=new ht("Removing items from cart failed",t);throw pt(r),r}))}catch(t){return Promise.reject(t)}},r.addShippingAddress=function(t){try{var r=this;return Promise.resolve(Cr(function(){if(function(t){hr({props:t,actionName:"AddShippingAddress",availableProps:["lineItems","shippingAddress"]});var r=t.lineItems,e=t.shippingAddress;if(!Array.isArray(r))throw Error('AddShippingAddress property "lineItems" is not type of array.');if(!r.length)throw Error('AddShippingAddress property "lineItems" is empty array.');pr(e)}(t),!r.cartId)throw"Missing Cart Id";var e=t.lineItems,n=t.shippingAddress,o=ur(r.cartId);return Promise.resolve(or.post(o,[{line_items:e.map(Ir),shipping_address:gr(n)}])).then(function(){return r.getCart()})},function(t){var r=new ht("Adding shipping address failed",t);throw pt(r),r}))}catch(t){return Promise.reject(t)}},r.updateShippingAddress=function(t){try{var r=this;return Promise.resolve(Cr(function(){if(function(t){hr({props:t,actionName:"UpdateShippingAddress",availableProps:["consignmentId","lineItems","shippingAddress"]});var r=t.consignmentId,e=t.lineItems,n=t.shippingAddress;if(!sr(r))throw Error('UpdateShippingAddress property "consignmentId" is not type of string');if(!r)throw Error('UpdateShippingAddress property "consignmentId" is empty string');if(!Array.isArray(e))throw Error('UpdateShippingAddress property "lineItems" is not type of array.');if(!e.length)throw Error('UpdateShippingAddress property "lineItems" is empty array.');pr(n)}(t),!r.cartId)throw"Missing Cart Id";var e=t.lineItems,n=t.shippingAddress,o=ur(r.cartId,t.consignmentId);return Promise.resolve(or.put(o,{line_items:e.map(Ir),shipping_address:gr(n)})).then(function(){return r.getCart()})},function(t){var r=new ht("Updating shipping address failed",t);throw pt(r),r}))}catch(t){return Promise.reject(t)}},r.getProductTrackingData=function(t){return fr(t),{id:t.id,quantity:t.quantity,brand:this.storeName,variantId:t.variantId,name:t.name,price:t.listPrice}},r.getItemIdInPlatformSpecificFormat=function(t){if("number"==typeof t)return t;var r=Number(t);if(!isNaN(r))throw Error("itemId is not type of number and cannot be converted to a number");return r},t}(),kr={shopify:(wr={},wr.graphql=function(t){if(!Nt(t))throw new Error("Invalid Store Configuration for Shopify.");var r=t.storeToken||process.env.STORE_TOKEN||"",e=new Tt({storeDomain:t.storeDomain||"",platformDomain:t.storePlatformDomain||"",storefrontAccessToken:r},{storeName:t.storeName||"",storeId:t.storeId||"",sharedCheckoutDomains:t.sharedCheckoutDomains});return new Dt({platform:e})},wr.rest=function(t){var r=new Mt({storeName:t.storeName||""});return new Dt({platform:r})},wr),big_commerce:(br={},br.rest=function(t){return new Dt({platform:new rr(t)})},br.management=function(t){return new Dt({platform:new _r(t)})},br)};function Sr(t,r){try{var e=t()}catch(t){return r(t)}return e&&e.then?e.then(void 0,r):e}var Er,jr=function(){function t(t){var r,e=t.platform;this.platform=void 0,this.productInventoryUrl=void 0,this.platform=e,this.productInventoryUrl=(r=process.env.SITE_DOMAIN||"")?new URL("/data/productInventory.json?v=2","https://"+r).href:"/data/productInventory.json?v=2"}var r=t.prototype;return r.fetchInventory=function(){try{var t=this;return Promise.resolve(Sr(function(){return Promise.resolve(fetch(t.productInventoryUrl)).then(function(t){return t.json()})},function(){return Promise.resolve({products:{},productVariants:{}})}))}catch(t){return Promise.reject(t)}},r.refreshInventoryOnInterval=function(t){var r=this,e=Number(process.env.NEXT_PRODUCT_INVENTORY_REFRESH_INTERVAL||process.env.PRODUCT_INVENTORY_REFRESH_INTERVAL);if(!isNaN(e))return window.setInterval(function(){try{var e=Sr(function(){return Promise.resolve(r.fetchInventory()).then(function(r){t(r)})},function(){});return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(t){return Promise.reject(t)}},Number(e)||6e4)},r.fetchProductsInventory=function(t,r){return this.platform.fetchProductsInventory(t,r)},r.refreshPlatformInventory=function(t){var r=this,e=t.ids,n=t.productType,o=t.callback,i=Number(t.interval);if(i&&!(i<0)){var a=Math.pow(2,31)-1;return window.setInterval(function(){try{var t=Sr(function(){return Promise.resolve(r.fetchProductsInventory(e,n)).then(function(t){o(t)})},function(){});return Promise.resolve(t&&t.then?t.then(function(){}):void 0)}catch(t){return Promise.reject(t)}},i<a?i:a)}},r.isProductAvailableForSale=function(t,r){return this.platform.isProductAvailableForSale(t,r)},r.getProductQuantity=function(t,r){return this.platform.getProductQuantity(t,r)},r.getProductMinOrder=function(t,r){return this.platform.getProductMinOrder(t,r)},r.getProductMaxOrder=function(t,r){return this.platform.getProductMaxOrder(t,r)},r.getProductPrice=function(t,r){return this.platform.getProductPrice(t,r)},t}(),Ar={shopify:function(t,r){return gt(t)?t:{Product:It(t),ProductVariant:Ct(t)}[r]},big_commerce:function(t){if("number"==typeof t)return t;var r=Number(t);if(!isNaN(r))throw Error("itemId is not type of number and cannot be converted to a number");return r}},Tr=function(t,r,e){return void 0===e&&(e="Product"),Ar[t](r,e)},Fr=F(Er||(Er=m(["\n  query getProductInventoryData($ids: [ID!]!) {\n    nodes(ids: $ids) {\n      ... on Product {\n        id\n        availableForSale\n        quantityAvailable: totalInventory\n      }\n      ... on ProductVariant {\n        id\n        availableForSale\n        quantityAvailable\n        price\n      }\n    }\n  }\n"]))),Dr=function(t){try{if(!t.ok)throw Error(t.statusText+" "+t.status);return Promise.resolve(function(r,e){try{var n=Promise.resolve(t.json())}catch(t){return e()}return n&&n.then?n.then(void 0,e):n}(0,function(){return t}))}catch(t){return Promise.reject(t)}},Nr=function(){function t(t){if(this.platformDomain=void 0,this.storeDomain=void 0,this.defaultHeaders=void 0,this.apiUrl=void 0,!Nt(t))throw new Error("Invalid Store Configuration for Shopify.");var r=t.storeToken,e=t.storeDomain;this.platformDomain=t.storePlatformDomain,this.storeDomain=e,this.defaultHeaders={"X-Shopify-Storefront-Access-Token":r||"","Accept-Language":"*","Content-Type":"application/json",Accept:"application/json"},this.apiUrl=(this.platformDomain?"https://"+this.platformDomain:this.storeDomain?"https://"+this.storeDomain:"")+"/api/2021-07/graphql"}return t.prototype.fetchInventoryByProductIds=function(t){return function(t,r,e){try{return Promise.resolve(fetch(t,{method:"POST",headers:r,body:e})).then(Dr)}catch(t){return Promise.reject(t)}}(this.apiUrl,this.defaultHeaders,Fr({ids:t}))},t}();function Or(t){if(r=t,!Array.isArray(r)||!Boolean(r.length))throw new Error("Ids must be an array");var r;if(!t.every(function(t){return"string"==typeof(e=t)&&Boolean(e)||"number"==typeof(r=t)&&r>0;var r,e}))throw new Error("Ids must be an array of strings or numbers");if(t.length>250)throw new Error("Max number of ids is 250")}function qr(t,r){try{var e=t()}catch(t){return r(t)}return e&&e.then?e.then(void 0,r):e}var xr=function(){function t(t){var r=this;this.client=void 0,this.inventory=void 0,this.getStorefrontIdsMap=function(t,e){return t.reduce(function(t,n){return t[r.getItemIdInPlatformSpecificFormat(n,e)]=n,t},{})},this.modifyInventoryResponse=function(t,e){return t.reduce(function(t,n){var o,i,a=n.id,c=e[a];return c&&(t[c]={price:n.price,availableForSale:n.availableForSale,quantity:n.quantityAvailable,minOrder:null==(o=r.getProductFromInventory(a))?void 0:o.minOrder,maxOrder:null==(i=r.getProductFromInventory(a))?void 0:i.maxOrder}),t},{})},this.client=new Nr(t),this.inventory=t.inventory||{}}var r=t.prototype;return r.getProductFromInventory=function(t){var r,e;return(null==(r=this.inventory.products)?void 0:r[t])||(null==(e=this.inventory.productVariants)?void 0:e[t])},r.getItemIdInPlatformSpecificFormat=function(t,r){return Tr("shopify",t,r)},r.fetchProductsInventory=function(t,r){try{var e=this;return Promise.resolve(qr(function(){Or(t);var n=e.getStorefrontIdsMap(t,r),o=Object.keys(n);return Promise.resolve(e.client.fetchInventoryByProductIds(o)).then(function(t){return e.modifyInventoryResponse(t.data.nodes,n)})},function(t){var r=new ht("Could not fetch inventory data from platform",t);throw pt(r),r}))}catch(t){return Promise.reject(t)}},r.isProductAvailableForSale=function(t,r){try{var e=this;return Promise.resolve(qr(function(){return Promise.resolve(e.fetchProductsInventory([t],r)).then(function(r){var e;return Boolean(null==(e=r[t])?void 0:e.availableForSale)})},function(t){var r=new ht("Could not fetch product availability",t);throw pt(r),r}))}catch(t){return Promise.reject(t)}},r.getProductMinOrder=function(t,r){try{try{var e=this.getItemIdInPlatformSpecificFormat(t,r),n=this.getProductFromInventory(e);return Promise.resolve(null==n?void 0:n.minOrder)}catch(t){var o=new ht("Could not fetch min order",t);throw pt(o),o}}catch(t){return Promise.reject(t)}},r.getProductMaxOrder=function(t,r){try{try{var e=this.getItemIdInPlatformSpecificFormat(t,r),n=this.getProductFromInventory(e);return Promise.resolve(null==n?void 0:n.maxOrder)}catch(t){var o=new ht("Could not fetch max order",t);throw pt(o),o}}catch(t){return Promise.reject(t)}},r.getProductQuantity=function(t,r){try{var e=this;return Promise.resolve(qr(function(){return Promise.resolve(e.fetchProductsInventory([t],r)).then(function(r){var e;return null==(e=r[t])?void 0:e.quantity})},function(t){var r=new ht("Could not fetch product quantity",t);throw pt(r),r}))}catch(t){return Promise.reject(t)}},r.getProductPrice=function(t,r){try{var e=this;return Promise.resolve(qr(function(){return Promise.resolve(e.fetchProductsInventory([t],r)).then(function(r){var e;return null==(e=r[t])?void 0:e.price})},function(t){var r=new ht("Could not fetch product price",t);throw pt(r),r}))}catch(t){return Promise.reject(t)}},t}(),Ur=function(t){try{if(!t.ok)throw Error(t.statusText+" "+t.status);return Promise.resolve(t.json())}catch(t){return Promise.reject(t)}},Vr=["id","price","inventory_level","inventory_warning_level","inventory_tracking","total_sold","availability","availability_description","order_quantity_minimum"].join(",");function $r(t,r){try{var e=t()}catch(t){return r(t)}return e&&e.then?e.then(void 0,r):e}var Rr=function(){function t(){}var r=t.prototype;return r.getItemIdInPlatformSpecificFormat=function(t){return Tr("big_commerce",t)},r.getStorefrontIdsMap=function(t){var r=this;return t.reduce(function(t,e){return t[String(r.getItemIdInPlatformSpecificFormat(e))]=e,t},{})},r.modifyInventoryResponse=function(t,r){return t.reduce(function(t,e){var n=r[e.id];return n&&(t[n]={availableForSale:"available"===e.availability,inventoryTracking:"none"!==e.inventory_tracking,quantity:e.inventory_level,minOrder:e.order_quantity_minimum,maxOrder:e.order_quantity_maximum,price:e.price}),t},{})},r.fetchProductsInventory=function(t){try{var r=this;return Promise.resolve($r(function(){Or(t);var e,n=r.getStorefrontIdsMap(t),o=Object.keys(n);return Promise.resolve((e=o,function(t,r){try{return Promise.resolve(fetch(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(void 0)})).then(Ur)}catch(t){return Promise.reject(t)}}(function(t){return"/v3/catalog/products?id:in="+t+"&include_fields="+Vr}(e.join(","))))).then(function(t){return r.modifyInventoryResponse(t.data,n)})},function(t){var r=new ht("Could not fetch inventory data from platform",t);throw pt(r),r}))}catch(t){return Promise.reject(t)}},r.isProductAvailableForSale=function(t){try{var r=this;return Promise.resolve($r(function(){return Promise.resolve(r.fetchProductsInventory([t])).then(function(r){var e;return Boolean(null==(e=r[t])?void 0:e.availableForSale)})},function(t){var r=new ht("Could not fetch product availability",t);throw pt(r),r}))}catch(t){return Promise.reject(t)}},r.getProductQuantity=function(t){try{var r=this;return Promise.resolve($r(function(){return Promise.resolve(r.fetchProductsInventory([t])).then(function(r){var e=r[t]||{};if(e.inventoryTracking)return e.quantity;console.warn("Inventory tracking is not enabled for this product")})},function(t){var r=new ht("Could not fetch product quantity",t);throw pt(r),r}))}catch(t){return Promise.reject(t)}},r.getProductMinOrder=function(t){try{var r=this;return Promise.resolve($r(function(){return Promise.resolve(r.fetchProductsInventory([t])).then(function(r){var e;return null==(e=r[t])?void 0:e.minOrder})},function(t){var r=new ht("Could not fetch min order",t);throw pt(r),r}))}catch(t){return Promise.reject(t)}},r.getProductMaxOrder=function(t){try{var r=this;return Promise.resolve($r(function(){return Promise.resolve(r.fetchProductsInventory([t])).then(function(r){var e;return null==(e=r[t])?void 0:e.maxOrder})},function(t){var r=new ht("Could not fetch max order",t);throw pt(r),r}))}catch(t){return Promise.reject(t)}},r.getProductPrice=function(t){try{var r=this;return Promise.resolve($r(function(){return Promise.resolve(r.fetchProductsInventory([t])).then(function(r){var e;return null==(e=r[t])?void 0:e.price})},function(t){var r=new ht("Could not fetch product price",t);throw pt(r),r}))}catch(t){return Promise.reject(t)}},t}(),Mr=function(t){return function(r){return new jr({platform:new t(r)})}},Lr={shopify:Mr(xr),big_commerce:Mr(Rr)};function Kr(t,r){return"object"==typeof t?a({},t,{type:null!=t.type?t.type:r}):{id:t,type:r}}var zr={id:"",items:[],inventory:{products:void 0,productVariants:void 0,status:"loading"},currencyCode:"",subtotalPrice:"",totalPrice:"",discountAmount:null,isCartShown:!1,checkoutUrl:"",currencies:[],consignment:null},Br=t.createContext(zr),Hr=t.createContext({}),Jr=t.createContext({});function Qr(t,r){switch(r.type){case"initial load":case"update cart":return a({},t,r.payload);case"show cart":return a({},t,{isCartShown:!0});case"hide cart":return a({},t,{isCartShown:!1});case"update inventory":return a({},t,{inventory:a({},r.payload)});case"add currencies":return a({},t,{currencies:r.payload});default:throw new Error("Wrong action type sent to cartReducer.")}}function Wr(e){var n=e.children,o=e.platform,i=e.storeConfig,c=i.platformApiType,u=void 0===c?"graphql":c;!function(t){var r=t.platform,e=t.platformApiType;if(!function(t){return j.includes(t)}(r))throw Error("Unsupported platform provided to CartProvider.");if(!function(t){return A.includes(t)}(e))throw Error("Unsupported platformApiType provided to CartProvider.");if("big_commerce"===r&&"graphql"===e)throw Error("The BigCommerce checkout only supports the REST API.")}({platform:o,platformApiType:u});var s=kr[o][u];if(!s)return null;var d=Lr[o](i);if(!d)return null;var f=t.useState(function(){return s(i)})[0],l=t.useReducer(Qr,zr),h=l[0],m=l[1],p=r(zr),v={shopify:"ProductVariant",big_commerce:"Product"}[o];return t.useEffect(function(){p.current=h},[h]),t.useEffect(function(){var t=void 0,r=f.getCart(),e=d.fetchInventory();return Promise.all([r,e]).then(function(r){var e=r[1];m({type:"initial load",payload:a({},r[0],{inventory:{products:null==e?void 0:e.products,productVariants:null==e?void 0:e.productVariants,status:"loaded"}})}),t=d.refreshInventoryOnInterval(function(t){m({type:"update inventory",payload:{products:t.products,productVariants:t.productVariants,status:"loaded"}})})}).catch(function(t){m({type:"initial load",payload:a({},t,{inventory:{products:null,productVariants:null,status:"error"}})})}),function(){null!=t&&clearInterval(t)}},[]),t.createElement(Br.Provider,{value:h},t.createElement(Hr.Provider,{value:Gr(m,f,p,d,v)},t.createElement(Jr.Provider,{value:d},n)))}function Gr(t,r,e,n,o){return{fetchProduct:function(t){try{var e=Kr(t,"Product"),n=e.id;return Promise.resolve("Product"===e.type?r.fetchProduct(n):r.fetchProductVariant(n))}catch(t){return Promise.reject(t)}},addItems:function(e){try{return Promise.resolve(r.addItemsToCart(e)).then(function(r){return Xr(t,r),r})}catch(t){return Promise.reject(t)}},updateItems:function(e){try{return Promise.resolve(r.updateItemsInCart(e)).then(function(r){return Xr(t,r),r})}catch(t){return Promise.reject(t)}},removeItems:function(e){try{return Promise.resolve(r.removeItemsFromCart(e)).then(function(r){return Xr(t,r),r})}catch(t){return Promise.reject(t)}},updateCart:function(e){try{return Promise.resolve(r.updateCart(e)).then(function(r){return Xr(t,r),r})}catch(t){return Promise.reject(t)}},showCart:function(){t({type:"show cart"})},hideCart:function(){t({type:"hide cart"})},getProductTrackingData:function(t){return r.getProductTrackingData(t)},isProductInInventory:function(){console.warn("\n\tDeprecation Warning:\n\t'isProductInInventory is deprecated.\n\tPlease use 'isProductAvailableForSale()' instead.\n\t\t\t")},isProductAvailableForSale:function(t){var r=Kr(t,o);return n.isProductAvailableForSale(r.id,r.type)},getProductQuantity:function(t){var r=Kr(t,o);return n.getProductQuantity(r.id,r.type)},getProductMinOrder:function(t){var r=Kr(t,o);return n.getProductMinOrder(r.id,r.type)},getProductMaxOrder:function(t){var r=Kr(t,o);return n.getProductMaxOrder(r.id,r.type)},getProductPrice:function(t){var r=Kr(t,o);return n.getProductPrice(r.id,r.type)},getCurrencies:function(){try{return Promise.resolve(r.fetchCurrencies()).then(function(r){return t({type:"add currencies",payload:r}),r})}catch(t){return Promise.reject(t)}},selectCurrency:function(n){try{var o=e.current.items.map(function(t){return{quantity:t.quantity,variantId:t.variant.id,customAttributes:t.customAttributes}});return Promise.resolve(r.selectCurrency({currency:n,lineItems:o})).then(function(r){return Xr(t,r),r})}catch(t){return Promise.reject(t)}},getShippingQuotes:function(n){try{var o,i=function(){var r,e;return Xr(t,o),null==(r=o)||null==(e=r.consignment)?void 0:e.availableShippingOptions},a=e.current,c=a.consignment,u=a.items.map(function(t){return{id:t.id,quantity:t.quantity}}),s=null!=c&&c.id?Promise.resolve(r.updateShippingAddress({consignmentId:c.id,lineItems:u,shippingAddress:n})).then(function(t){o=t}):Promise.resolve(r.addShippingAddress({lineItems:u,shippingAddress:n})).then(function(t){o=t});return Promise.resolve(s&&s.then?s.then(i):i())}catch(t){return Promise.reject(t)}}}}function Xr(t,r){t({type:"update cart",payload:r})}function Zr(){return t.useContext(Br)}function Yr(){return t.useContext(Hr)}function te(){return[Zr(),Yr()]}var re=function(c){var u=c||{},s=u.ids,d=u.productType,f=u.interval,l=t.useContext(Jr),h=e({products:{},loading:Boolean(null==s?void 0:s.length)}),m=h[0],p=h[1],v=r(s),y=r(m.loading);y.current=m.loading;var P=n(function(){var t;return s&&v.current&&(null==(t=v.current)?void 0:t.length)===(null==s?void 0:s.length)&&(null==v.current.every?void 0:v.current.every(function(t){return null==s.includes?void 0:s.includes(t)}))?v.current:(v.current=s,s)},[s]),g=o(function(t){p({products:t,loading:!1})},[p]);return i(function(){if(null!=P&&P.length&&(y.current||p(function(t){return a({},t,{loading:!0})}),function(){try{Promise.resolve(l.fetchProductsInventory(s,d)).then(function(t){g(t)})}catch(t){return Promise.reject(t)}}(),f)){var t=l.refreshPlatformInventory({ids:P,interval:f,productType:d,callback:g});return function(){clearInterval(t)}}},[P,d]),m};export{Wr as CartProvider,te as useCart,Yr as useCartActions,Zr as useCartState,re as useInventory};

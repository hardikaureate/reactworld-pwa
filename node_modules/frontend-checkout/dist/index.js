var t=require("react");function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var e=r(t);function n(){return(n=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}).apply(this,arguments)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,r){return(i=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function c(t,r,e){return(c=a()?Reflect.construct:function(t,r,e){var n=[null];n.push.apply(n,r);var o=new(Function.bind.apply(t,n));return e&&i(o,e.prototype),o}).apply(null,arguments)}function u(t){var r="function"==typeof Map?new Map:void 0;return(u=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,e)}function e(){return c(t,arguments,o(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i(e,t)})(t)}function s(t,r){if(null==t)return{};var e,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r.indexOf(e=i[n])>=0||(o[e]=t[e]);return o}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t,r){return r||(r=t.slice(0)),t.raw=r,t}var l,h,m,p,v,y,P,g,I,C,w,b,_,k=["shopify","big_commerce"],S=["graphql","rest","management"],E=/(query|mutation) ?([\w\d-_]+)? ?\(.*?\)? \{/;function j(t){var r=Array.isArray(t)?[].concat(t,[].slice.call(arguments,1)).join(""):t,e=E.exec(r);return function(t){var n={query:r};return t&&(n.variables=t),e&&e.length&&e[2]&&(n.operationName=e[2]),JSON.stringify(n)}}var A="\n  fragment ProductVariantPricePairConnectionFragment on ProductVariantPricePairConnection {\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n    }\n    edges {\n      node {\n        price {\n          amount\n          currencyCode\n        }\n        compareAtPrice {\n          amount\n          currencyCode\n        }\n      }\n    }\n  }\n",T="\n  fragment ImageConnectionFragment on ImageConnection {\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n    }\n    edges {\n      cursor\n      node {\n        id\n        src\n        altText\n      }\n    }\n  }\n",F="\n  fragment ProductVariantFragment on ProductVariant {\n    id\n    title\n    price\n    priceV2 {\n      amount\n      currencyCode\n    }\n    presentmentPrices(first: 20) {\n      ...ProductVariantPricePairConnectionFragment\n    }\n    weight\n    quantityAvailable\n    available: availableForSale\n    sku\n    compareAtPrice\n    compareAtPriceV2 {\n      amount\n      currencyCode\n    }\n    image {\n      id\n      src: originalSrc\n      altText\n    }\n    selectedOptions {\n      name\n      value\n    }\n    unitPrice {\n      amount\n      currencyCode\n    }\n    unitPriceMeasurement {\n      measuredType\n      quantityUnit\n      quantityValue\n      referenceUnit\n      referenceValue\n    }\n  }\n",D="\n  fragment ProductFragment on Product {\n    id\n    availableForSale\n    createdAt\n    updatedAt\n    descriptionHtml\n    description\n    handle\n    productType\n    title\n    vendor\n    publishedAt\n    onlineStoreUrl\n    options {\n      name\n      values\n    }\n    images(first: 250) {\n      ...ImageConnectionFragment\n    }\n    variants(first: 250) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        cursor\n        node {\n          ...ProductVariantFragment\n        }\n      }\n    }\n  }\n",N="\n  fragment UserErrorFragment on UserError {\n    field\n    message\n  }\n",O="\n  fragment CheckoutUserErrorFragment on CheckoutUserError {\n    field\n    message\n    code\n  }\n",q="\n  fragment DiscountApplicationFragment on DiscountApplication {\n    targetSelection\n    allocationMethod\n    targetType\n    value {\n      ... on MoneyV2 {\n        amount\n        currencyCode\n      }\n      ... on PricingPercentageValue {\n        percentage\n      }\n    }\n    ... on ManualDiscountApplication {\n      title\n      description\n    }\n    ... on DiscountCodeApplication {\n      code\n      applicable\n    }\n    ... on ScriptDiscountApplication {\n      description\n    }\n    ... on AutomaticDiscountApplication {\n      title\n    }\n  }\n",x="\n  fragment VariantWithProductFragment on ProductVariant {\n    ...ProductVariantFragment\n    product {\n      id\n      handle\n    }\n  }\n",U="\n  fragment CheckoutLineItemConnectionFragment on CheckoutLineItemConnection {\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n    }\n    edges {\n      cursor\n      node {\n        id\n        title\n        variant {\n          ...VariantWithProductFragment\n        }\n        quantity\n        customAttributes {\n          key\n          value\n        }\n        discountAllocations {\n          allocatedAmount {\n            amount\n            currencyCode\n          }\n          discountApplication {\n            ...DiscountApplicationFragment\n          }\n        }\n      }\n    }\n  }\n",V="\n  fragment CheckoutFragment on Checkout {\n    id\n    webUrl\n    subtotalPrice\n    subtotalPriceV2 {\n      amount\n      currencyCode\n    }\n    totalPriceV2 {\n      amount\n      currencyCode\n    }\n    lineItems(first: 250) {\n      ...CheckoutLineItemConnectionFragment\n    }\n    completedAt\n  }\n",R=j(l||(l=f(["\n  query Product($handle: String!) {\n    productByHandle(handle: $handle) {\n      ...ProductFragment\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"])),D,F,T,A),$=j(h||(h=f(["\n  query Product($id: ID!) {\n    node(id: $id) {\n      ...ProductFragment\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"])),D,F,T,A),M=j(m||(m=f(["\n  mutation CreateCheckout($input: CheckoutCreateInput!) {\n    checkoutCreate(input: $input) {\n      userErrors {\n        ...UserErrorFragment\n      }\n      checkoutUserErrors {\n        ...CheckoutUserErrorFragment\n      }\n      checkout {\n        ...CheckoutFragment\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),N,O,V,q,x,F,A,U),L=j(p||(p=f(["\n  query CheckoutLineItems($checkoutId: ID!, $pageSize: Int!, $cursor: String) {\n    node(id: $checkoutId) {\n      ... on Checkout {\n        lineItems(first: $pageSize, after: $cursor) {\n          ...CheckoutLIneItemConnectionFragment\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),U,q,x,F,T,A),K=j(v||(v=f(["\n  query Checkout($id: ID!) {\n    node(id: $id) {\n      ... on Checkout {\n        ...CheckoutFragment\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),V,q,x,F,A,U),z=j(y||(y=f(["\n  query PresentmentPrices($productVariantId: ID!, $pageSize: Int!, $cursor: String) {\n    node(id: $productVariantId) {\n      ... on ProductVariant {\n        presentmentPrices(first: $pageSize, after: $cursor) {\n          ...ProductVariantPricePairConnectionFragment\n        }\n      }\n    }\n  }\n  ","\n"])),A),B=j(P||(P=f(["\n  query ProductImages($productId: ID!, $pageSize: Int!, $cursor: String) {\n    node(id: $productId) {\n      ... on Product {\n        images(first: $pageSize, after: $cursor) {\n          ...ImageConnectionFragment\n        }\n      }\n    }\n  }\n  ","\n"])),T),H=j(g||(g=f(["\n  query ProductVariant($id: ID!) {\n    node(id: $id) {\n      ... on ProductVariant {\n        ...VariantWithProductFragment\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"])),F,x,A),J=j(I||(I=f(["\n  query ProductVariants($productId: ID!, $pageSize: Int!, $cursor: String) {\n    node(id: $id) {\n      ... on Product {\n        variants(first: $pageSize, after: $cursor) {\n          ...ProductVariantFragment\n        }\n      }\n    }\n  }\n  ","\n  ","\n"])),F,A),Q=j(C||(C=f(["\n  mutation RemoveCheckoutLineItems($checkoutId: ID!, $lineItemIds: [ID!]!) {\n    checkoutLineItemsRemove(checkoutId: $checkoutId, lineItemIds: $lineItemIds) {\n      userErrors {\n        ...UserErrorFragment\n      }\n      checkoutUserErrors {\n        ...CheckoutUserErrorFragment\n      }\n      checkout {\n        ...CheckoutFragment\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),N,O,V,q,x,F,A,U),W=j(w||(w=f(["\n  mutation UpdateCheckoutLineItems($checkoutId: ID!, $lineItems: [CheckoutLineItemUpdateInput!]!) {\n    checkoutLineItemsUpdate(checkoutId: $checkoutId, lineItems: $lineItems) {\n      userErrors {\n        ...UserErrorFragment\n      }\n      checkoutUserErrors {\n        ...CheckoutUserErrorFragment\n      }\n      checkout {\n        ...CheckoutFragment\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),N,O,V,q,x,F,A,U),G=j(b||(b=f(["\n  mutation AddCheckoutLineItems($checkoutId: ID!, $lineItems: [CheckoutLineItemInput!]!) {\n    checkoutLineItemsAdd(checkoutId: $checkoutId, lineItems: $lineItems) {\n      userErrors {\n        ...UserErrorFragment\n      }\n      checkoutUserErrors {\n        ...CheckoutUserErrorFragment\n      }\n      checkout {\n        ...CheckoutFragment\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),N,O,V,q,x,F,A,U),X=j(_||(_=f(["\n  query getCurrencies {\n    shop {\n      paymentSettings {\n        enabledPresentmentCurrencies\n      }\n    }\n  }\n"])));function Z(t,r,e){if(!t.s){if(e instanceof tt){if(!e.s)return void(e.o=Z.bind(null,t,r));1&r&&(r=e.s),e=e.v}if(e&&e.then)return void e.then(Z.bind(null,t,r),Z.bind(null,t,2));t.s=r,t.v=e;var n=t.o;n&&n(t)}}var Y=function(t,r){try{return Promise.resolve(et(t,r)).then(function(t){return t.flatMap(function(t){return t.edges.map(function(t){return t.node})})})}catch(t){return Promise.reject(t)}},tt=function(){function t(){}return t.prototype.then=function(r,e){var n=new t,o=this.s;if(o){var i=1&o?r:e;if(i){try{Z(n,1,i(this.v))}catch(t){Z(n,2,t)}return n}return this}return this.o=function(t){try{var o=t.v;1&t.s?Z(n,1,r?r(o):o):e?Z(n,1,e(o)):Z(n,2,o)}catch(t){Z(n,2,t)}},n},t}();function rt(t){return t instanceof tt&&1&t.s}var et=function(t,r){try{var e,n=[t],o=t;if(!o.pageInfo.hasNextPage)return Promise.resolve(n);var i=function(t,r,e){for(var n;;){var o=t();if(rt(o)&&(o=o.v),!o)return i;if(o.then){n=0;break}var i=e();if(i&&i.then){if(!rt(i)){n=1;break}i=i.s}}var a=new tt,c=Z.bind(null,a,2);return(0===n?o.then(s):1===n?i.then(u):(void 0).then(function(){(o=t())?o.then?o.then(s).then(void 0,c):s(o):Z(a,1,i)})).then(void 0,c),a;function u(r){i=r;do{if(!(o=t())||rt(o)&&!o.v)return void Z(a,1,i);if(o.then)return void o.then(s).then(void 0,c);rt(i=e())&&(i=i.v)}while(!i||!i.then);i.then(u).then(void 0,c)}function s(t){t?(i=e())&&i.then?i.then(u).then(void 0,c):u(i):Z(a,1,i)}}(function(){return!e&&!!o.pageInfo.hasNextPage},0,function(){var t=o.edges[o.edges.length-1];if(null!=t)return Promise.resolve(r(t.cursor)).then(function(t){null!=t?(n.push(t),o=t):e=1});e=1});return Promise.resolve(i&&i.then?i.then(function(){return n}):n)}catch(t){return Promise.reject(t)}},nt=function(t,r){try{return Promise.resolve(ot(t,r)).then(function(r){return n({},r,{product:t.product})})}catch(t){return Promise.reject(t)}},ot=function(t,r){try{return Promise.resolve(Y(t.presentmentPrices,function(e){return r.fetchPresentmentPricesPage(t.id,e)})).then(function(r){return n({},t,{presentmentPrices:r})})}catch(t){return Promise.reject(t)}},it=function(t,r){try{return Promise.resolve(Y(t.lineItems,function(e){return r.fetchCheckoutLineItemsPage(t.id,e)}).then(function(t){return t.map(function(t){return function(t,r){try{var e=function(r){return n({},t,{variant:r})};return Promise.resolve(null!=t.variant?Promise.resolve(nt(t.variant,r)).then(e):e(null))}catch(t){return Promise.reject(t)}}(t,r)})}).then(function(t){return Promise.all(t)})).then(function(e){return n({},t,{checkoutUrl:ct(t.webUrl,r),lineItemCount:e.length,lineItems:e})})}catch(t){return Promise.reject(t)}},at=function(t,r){try{var e=Y(t.images,function(e){return r.fetchProductImagesPage(t.id,e)}),o=Y(t.variants,function(e){return r.fetchProductVariantsPage(t.id,e)}).then(function(t){return t.map(function(t){return ot(t,r)})}).then(function(t){return Promise.all(t)});return Promise.resolve(Promise.all([e,o])).then(function(r){return n({},t,{images:r[0],variants:r[1]})})}catch(t){return Promise.reject(t)}};function ct(t,r){var e=r.storeDomain,n=r.platformDomain;return null!=e&&null!=n?t.replace(n,e):t}function ut(t){var r,e;if(null!=(r=t.userErrors)&&r.length)throw new Error(JSON.stringify(t.userErrors));if(null!=(e=t.checkoutUserErrors)&&e.length)throw new Error(JSON.stringify(t.checkoutUserErrors));if(null==t||!t.checkout)throw new Error("The checkoutCreate mutation failed due to an unknown error.");return t.checkout}var st=function(){function t(t){this.apiUrl=void 0,this.platformDomain=void 0,this.storeDomain=void 0,this.defaultHeaders=void 0;var r=t.storefrontAccessToken,e=t.storeDomain;this.platformDomain=t.platformDomain,this.storeDomain=e;var n=function(t,r){return r?"https://"+r:t?"https://"+t:""}(this.storeDomain,this.platformDomain);this.apiUrl=n+"/api/2021-07/graphql",this.defaultHeaders={"X-Shopify-Storefront-Access-Token":r,"Accept-Language":"*","Content-Type":"application/json",Accept:"application/json"}}var r=t.prototype;return r.fetchProductByHandle=function(t){try{var r=this,e=R({handle:t});return Promise.resolve(r.post(e)).then(function(t){return Promise.resolve(at(t.productByHandle,r))})}catch(t){return Promise.reject(t)}},r.fetchProduct=function(t){try{var r=this,e=$({id:t});return Promise.resolve(r.post(e)).then(function(t){return Promise.resolve(at(t.node,r))})}catch(t){return Promise.reject(t)}},r.createCart=function(t){try{var r=this,e=M({input:t||{}});return Promise.resolve(r.post(e)).then(function(t){var e=ut(t.checkoutCreate);return it(e,r)})}catch(t){return Promise.reject(t)}},r.fetchCart=function(t){try{var r=this,e=K({id:t});return Promise.resolve(r.post(e)).then(function(t){return it(t.node,r)})}catch(t){return Promise.reject(t)}},r.addCheckoutLineItems=function(t,r){try{var e=this,n=G({checkoutId:t,lineItems:r});return Promise.resolve(e.post(n)).then(function(t){var r=ut(t.checkoutLineItemsAdd);return it(r,e)})}catch(t){return Promise.reject(t)}},r.removeCheckoutLineItems=function(t,r){try{var e=this,n=Q({checkoutId:t,lineItemIds:r});return Promise.resolve(e.post(n)).then(function(t){var r=ut(t.checkoutLineItemsRemove);return it(r,e)})}catch(t){return Promise.reject(t)}},r.updateCheckoutLineItems=function(t,r){try{var e=this,n=W({checkoutId:t,lineItems:r});return Promise.resolve(e.post(n)).then(function(t){var r=ut(t.checkoutLineItemsUpdate);return it(r,e)})}catch(t){return Promise.reject(t)}},r.fetchProductVariant=function(t){try{var r=this,e=H({id:t});return Promise.resolve(r.post(e)).then(function(t){return nt(t.node,r)})}catch(t){return Promise.reject(t)}},r.fetchCheckoutLineItemsPage=function(t,r,e){void 0===e&&(e=250);try{var n=L({checkoutId:t,pageSize:e,cursor:r});return Promise.resolve(this.post(n)).then(function(t){return t.node.lineItems})}catch(t){return Promise.reject(t)}},r.fetchProductImagesPage=function(t,r,e){void 0===e&&(e=250);try{var n=B({productId:t,pageSize:e,cursor:r});return Promise.resolve(this.post(n)).then(function(t){return t.node.images})}catch(t){return Promise.reject(t)}},r.fetchProductVariantsPage=function(t,r,e){void 0===e&&(e=250);try{var n=J({productId:t,pageSize:e,cursor:r});return Promise.resolve(this.post(n)).then(function(t){return t.node.variants})}catch(t){return Promise.reject(t)}},r.fetchPresentmentPricesPage=function(t,r,e){void 0===e&&(e=250);try{var n=z({productVariantId:t,pageSize:e,cursor:r});return Promise.resolve(this.post(n)).then(function(t){return t.node.presentmentPrices})}catch(t){return Promise.reject(t)}},r.fetchCurrencies=function(){try{var t=X();return Promise.resolve(this.post(t)).then(function(t){return t.shop.paymentSettings.enabledPresentmentCurrencies})}catch(t){return Promise.reject(t)}},r.post=function(t,r){try{return Promise.resolve((e=this.apiUrl,void 0===(o={headers:n({},this.defaultHeaders,r||{}),method:"POST",body:t})&&(o={}),new Promise(function(t,r){fetch(e,o).then(function(e){try{return Promise.resolve(function(n,o){try{var i=e.ok?Promise.resolve(e.json()).then(function(e){var n=e.data,o=e.errors;return null!=n?t(n):r(null!=o&&o.length?new Error(JSON.stringify(o)):new Error("The request failed with an unknown error"))}):r(new Error(e.statusText))}catch(t){return o(t)}return i&&i.then?i.then(void 0,o):i}(0,function(t){r(t)}))}catch(t){return Promise.reject(t)}},function(t){return r(t)})})))}catch(t){return Promise.reject(t)}var e,o},t}(),dt=function(t){var r,e;function n(r,e,o){var i;void 0===o&&(o="CheckoutError");var a=r+" "+(e?e.message:"");return(i=t.call(this,a)||this).name=void 0,i.message=void 0,i.stack=void 0,Object.setPrototypeOf(d(i),(this instanceof n?this.constructor:void 0).prototype),i.name=o,i.message=a,e?i.stack=e.stack:Error.captureStackTrace(d(i)),i}return e=t,(r=n).prototype=Object.create(e.prototype),r.prototype.constructor=r,i(r,e),n}(u(Error)),ft={development:{log:console.log,error:console.error},production:{log:function(t,r){},error:function(t,r){}},test:{log:console.log,error:console.error}}[process.env.NODE_ENV||"development"],lt=function(t){try{return Promise.resolve(ft.log(t)).then(function(){})}catch(t){return Promise.reject(t)}},ht=/^(gid):\/\/(shopify)\/(.*)\/([0-9]+)/i,mt=/^(?:[A-Za-z0-9+\\/]{4})*(?:[A-Za-z0-9+\\/]{2}(==)?|[A-Za-z0-9+\\/]{3}=?)?$/,pt=function(t){return!isNaN(Number(t))};function vt(t){if("number"==typeof t)return!1;try{return It(t),!0}catch(t){return!1}}function yt(t){if(!t)throw new Error("id cannot be "+JSON.stringify(t));if("string"==typeof t&&mt.test(t)){var r=It(t);return"Product"===r[0]?t:gt("Product",r[1])}if("string"==typeof t&&!pt(t))throw new Error("id is a string and not a storefrontId. Is this a product handle?");return gt("Product",Number(t))}function Pt(t){if(!t)throw new Error("id cannot be "+JSON.stringify(t));if("string"==typeof t&&mt.test(t)){var r=It(t);return"ProductVariant"===r[0]?t:gt("ProductVariant",r[1])}if("string"==typeof t&&!pt(t))throw new Error("id is a string and not a storefrontId. Is this a product handle?");return gt("ProductVariant",Number(t))}function gt(t,r){return btoa("gid://shopify/"+t+"/"+r)}function It(t){if(null==t)throw new Error("id cannot be "+t);if(!mt.test(t))throw new Error("id is a string and not a storefrontId. Is this a product handle?");var r=atob(t).match(ht);if(null==r||"string"!=typeof r[3]||!pt(r[4]))throw new Error("id is a string and not a storefrontId. Is this a product handle?");return[r[3],Number(r[4])]}var Ct=function(t,r){document.cookie=t+"="+r+";;Secure=true;SameSite=None"};function wt(t,r){var e=new URL(t.checkoutUrl).pathname;return{id:String(t.id),items:t.lineItems.map(function(r){var e,o,i,a;return n({},r,{variant_id:null==(e=r.variant)?void 0:e.id,selectedCurrencyPrice:null==(o=r.variant)||null==(i=o.presentmentPrices)||null==(a=i.find(function(r){return r.price.currencyCode===t.subtotalPriceV2.currencyCode}))?void 0:a.price.amount})}),currencyCode:t.subtotalPriceV2.currencyCode,subtotalPrice:t.subtotalPriceV2.amount,totalPrice:t.totalPriceV2.amount,checkoutUrl:r.storeDomain?"https://"+r.storeDomain+e:t.checkoutUrl}}function bt(t,r){if(!function(t){return t&&"object"==typeof t}(t))throw Error((r||"props")+" is not an object.")}function _t(t){return"string"==typeof t}function kt(t){t.forEach(function(t){if(bt(t,"item"),!t.id)throw Error('Please provide "id" property to every item.');if(!_t(t.id))throw Error('All items should have property "id" of type string.');if(!t.quantity)throw Error('Please provide "quantity" property for every item.')})}function St(t,r){try{var e=t()}catch(t){return r(t)}return e&&e.then?e.then(void 0,r):e}var Et=function(){function t(t,r){this.client=void 0,this.storeDomain=void 0,this.storeName=void 0,this.cartKey=void 0,this.sharedCheckoutDomains=void 0,this.isSharedCheckout=void 0,this.client=new st(t),this.storeDomain=t.storeDomain,this.storeName=r.storeName,this.cartKey="cartId-"+r.storeId,this.sharedCheckoutDomains=r.sharedCheckoutDomains||[],this.isSharedCheckout=this.sharedCheckoutDomains.length>0}var r=t.prototype;return r.getCartId=function(){try{var t,r=this,e=function(e){return t?e:Promise.resolve(r.createCart()).then(function(t){return t.id})},n=St(function(){function e(e){return t?e:function(){if(r.isSharedCheckout)return Promise.resolve((e=r.sharedCheckoutDomains,e.forEach(function(t){var r=document.querySelector('iframe[data-store-domain="'+t+'"]');r&&document.body.removeChild(r);var e=document.createElement("iframe");e.setAttribute("src",t+"/shogun-shared-checkout"),e.setAttribute("data-store-domain",t),e.setAttribute("title","Shared checkout on "+t),e.setAttribute("style","display:none"),document.body.appendChild(e)}),Promise.any(e.map(function(t){return new Promise(function(r,e){var n=!1;setTimeout(function(){return!n&&e()},1500),window.addEventListener("message",function o(i){if("shared checkout loaded"===i.data.message&&t===i.data.domain)return n=!0,window.removeEventListener("message",o),i.data.cartId?r({sharedCartId:i.data.cartId}):e()})})})))).then(function(e){var n=e.sharedCartId;if(n)return t=1,function(t,r){return Ct(t,r),localStorage.setItem(t,r),r}(r.cartKey,n)});var e}()}var n=localStorage.getItem(r.cartKey),o=function(){if(n)return Promise.resolve(r.client.fetchCart(n)).then(function(r){if(r)return t=1,n})}();return o&&o.then?o.then(e):e(o)},function(){});return Promise.resolve(n&&n.then?n.then(e):e(n))}catch(t){return Promise.reject(t)}},r.fetchProduct=function(t){try{var r=this;try{if("string"==typeof t&&!vt(t))return Promise.resolve(r.client.fetchProductByHandle(t));var e=r.getItemIdInPlatformSpecificFormat(t);return Promise.resolve(r.client.fetchProduct(e))}catch(t){var n=new dt("Fetching product by id failed.",t);throw lt(n),n}}catch(t){return Promise.reject(t)}},r.fetchProductVariant=function(t){try{try{var r=this.getItemIdInPlatformSpecificFormat(t,"ProductVariant");return Promise.resolve(this.client.fetchProductVariant(r))}catch(t){var e=new dt("Fetching product variant by id failed.",t);throw lt(e),e}}catch(t){return Promise.reject(t)}},r.fetchCurrencies=function(){try{try{return Promise.resolve(this.client.fetchCurrencies())}catch(r){var t=new dt("Fetching currencies failed.",r);throw lt(t),t}}catch(t){return Promise.reject(t)}},r.selectCurrency=function(t){try{try{return function(t){if(bt(t,"props"),!t.currency)throw Error('Please provide "currency" property');if("string"!=typeof t.currency)throw Error("Currency is not type of string");t.lineItems&&(function(t,r){if(!function(t){return Array.isArray(t)}(t))throw Error("items is not an object.")}(t.lineItems),t.lineItems.forEach(function(t){if(bt(t,"lineItem"),!t.variantId)throw Error('Please provide "variantId" property to every lineItem.');if(!_t(t.variantId))throw Error('All lineItems should have property "variantId" of type string.');if(!t.quantity)throw Error('Please provide "quantity" property for every lineItem.')}))}(t),Promise.resolve(this.createCart({lineItems:t.lineItems,presentmentCurrencyCode:t.currency}))}catch(t){var r=new dt("Selecting currency failed.",t);throw lt(r),r}}catch(t){return Promise.reject(t)}},r.createCart=function(t){try{var r=this;return Promise.resolve(St(function(){return Promise.resolve(r.client.createCart(t)).then(function(t){if(!t)throw Error("No cart retrieved from API.");try{localStorage.setItem(r.cartKey,String(t.id)),r.isSharedCheckout&&(Ct(r.cartKey,String(t.id)),e=r.sharedCheckoutDomains,n=String(t.id),e.forEach(function(t){var r=document.querySelector('iframe[data-store-domain="'+t+'"]');r&&r.contentWindow&&r.contentWindow.postMessage({message:"save new cartId",cartId:n},t)}))}catch(t){}var e,n;return wt(t,{storeDomain:r.storeDomain})})},function(t){var r=new dt("Creating cart failed.",t);throw lt(r),r}))}catch(t){return Promise.reject(t)}},r.addItemsToCart=function(t){try{var r=this;return Promise.resolve(r.getCartId()).then(function(e){return St(function(){var o=t.map(function(t){var e=t.id;return n({},s(t,["id"]),{id:r.getItemIdInPlatformSpecificFormat(e,"ProductVariant")})}),i=function(t){return t.map(function(t){var r=t.id,e=s(t,["id"]);return n({variantId:vt(r)?r:Pt(r)},e)})}(o);return kt(o),Promise.resolve(r.client.addCheckoutLineItems(e,i)).then(function(t){return t.completedAt?r.createCart():wt(t,{storeDomain:r.storeDomain})})},function(t){var r=new dt("Adding items to cart failed.",t);throw lt(r),r})})}catch(t){return Promise.reject(t)}},r.updateItemsInCart=function(t){try{var r=this;return Promise.resolve(r.getCartId()).then(function(e){return St(function(){var o=t.map(function(t){var e=t.id;return n({},s(t,["id"]),{id:r.getItemIdInPlatformSpecificFormat(e)})});return kt(o),Promise.resolve(r.client.updateCheckoutLineItems(e,o)).then(function(t){return t.completedAt?r.createCart():wt(t,{storeDomain:r.storeDomain})})},function(t){var r=new dt("Updating items in cart failed.",t);throw lt(r),r})})}catch(t){return Promise.reject(t)}},r.removeItemsFromCart=function(t){try{var r=this;return Promise.resolve(r.getCartId()).then(function(e){return St(function(){return t.forEach(function(t){if(!_t(t))throw Error("All ids should be type of string.")}),Promise.resolve(r.client.removeCheckoutLineItems(e,t)).then(function(t){return t.completedAt?r.createCart():wt(t,{storeDomain:r.storeDomain})})},function(t){var r=new dt("Removing items from cart failed.",t);throw lt(r),r})})}catch(t){return Promise.reject(t)}},r.getCart=function(){try{var t=this;return Promise.resolve(t.getCartId()).then(function(r){return St(function(){return Promise.resolve(t.client.fetchCart(r)).then(function(r){return!r||null!=r&&r.completedAt?t.createCart():wt(r,{storeDomain:t.storeDomain})})},function(t){var r=new dt("Getting cart failed.",t);throw lt(r),r})})}catch(t){return Promise.reject(t)}},r.getProductTrackingData=function(t){if(!function(t){return"string"==typeof t.id}(t))throw new dt('Not valid "item" provided to getProductTrackingData method.');return t.variant?{id:t.variant.sku||t.id.toString(),name:t.title,brand:this.storeName,variant:t.variant.title||"",price:parseFloat(t.variant.price||"0"),compareAtPrice:parseFloat(t.variant.compareAtPrice||"0"),quantity:t.quantity}:{id:String(t.id),name:t.title,brand:this.storeName,quantity:t.quantity,price:0}},r.getItemIdInPlatformSpecificFormat=function(t,r){return void 0===r&&(r="Product"),vt(t)?t:{Product:yt(t),ProductVariant:Pt(t)}[r]},t}();function jt(t){return Array.isArray(t)?t:[t]}var At=function(){function t(t){var r=t.platform;this.platform=void 0,this.platform=r}var r=t.prototype;return r.fetchProduct=function(t){if(!this.platform.fetchProduct)throw new Error("Operation not supported by the selected platform.");return this.platform.fetchProduct(t)},r.fetchProductVariant=function(t){if(!this.platform.fetchProductVariant)throw new Error("Operation not supported by the selected platform.");return this.platform.fetchProductVariant(t)},r.fetchCurrencies=function(){if(!this.platform.fetchCurrencies)throw new Error("Operation not supported by the selected platform.");return this.platform.fetchCurrencies()},r.selectCurrency=function(t){if(!this.platform.selectCurrency)throw new Error("Operation not supported by the selected platform.");return this.platform.selectCurrency(t)},r.addItemsToCart=function(t){var r=jt(t);return this.platform.addItemsToCart(r)},r.updateItemsInCart=function(t){try{var r=jt(t);return Promise.resolve(this.platform.updateItemsInCart(r))}catch(t){return Promise.reject(t)}},r.removeItemsFromCart=function(t){try{var r=jt(t);return Promise.resolve(this.platform.removeItemsFromCart(r))}catch(t){return Promise.reject(t)}},r.updateCart=function(t){try{if(!this.platform.updateCart)throw new Error("Operation not supported by the selected platform.");return Promise.resolve(this.platform.updateCart(t))}catch(t){return Promise.reject(t)}},r.getCart=function(){try{return Promise.resolve(this.platform.getCart())}catch(t){return Promise.reject(t)}},r.addShippingAddress=function(t){try{if(!this.platform.addShippingAddress)throw new Error("Operation not supported by the selected platform.");return Promise.resolve(this.platform.addShippingAddress(t))}catch(t){return Promise.reject(t)}},r.updateShippingAddress=function(t){try{if(!this.platform.updateShippingAddress)throw new Error("Operation not supported by the selected platform.");return Promise.resolve(this.platform.updateShippingAddress(t))}catch(t){return Promise.reject(t)}},r.getProductTrackingData=function(t){return this.platform.getProductTrackingData(t)},r.getItemIdInPlatformSpecificFormat=function(t,r){return this.platform.getItemIdInPlatformSpecificFormat(t,r)},t}(),Tt=function(t){return r=t,["storeDomain","storeToken","storePlatformDomain"].every(function(t){return function(t,r){return r in t}(r,t)});var r},Ft=function(t){try{var r,e=function(e){if(t.ok)return r;throw r},n=function(e,n){try{var o=Promise.resolve(t.json()).then(function(t){r=t})}catch(t){return n(t)}return o&&o.then?o.then(void 0,n):o}(0,function(r){throw new dt("Cart action failed: "+t.statusText+" ("+t.status+")",r)});return Promise.resolve(n&&n.then?n.then(e):e())}catch(t){return Promise.reject(t)}},Dt=function(t){try{return Promise.resolve(fetch(t)).then(Ft)}catch(t){return Promise.reject(t)}},Nt=function(t,r){try{return Promise.resolve(fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).then(Ft)}catch(t){return Promise.reject(t)}};function Ot(t){return"number"==typeof t}function qt(t){t.forEach(function(t){if(!t.id)throw Error('Please provide "id" property to every item.');if(!Ot(t.id))throw Error('All items should have property "id" of type number.');!function(t){if("number"!=typeof t.quantity)throw Error('"quantity" is not type of number.')}(t)})}function xt(t){return{id:String(t.token),currencyCode:t.currency,subtotalPrice:t.items_subtotal_price,totalPrice:t.original_total_price,items:t.items.map(function(t,r){return n({},t,{variant:{id:t.variant_id},line:r+1})}),checkoutUrl:"/checkout",attributes:t.attributes,note:t.note}}function Ut(t,r){try{var e=t()}catch(t){return r(t)}return e&&e.then?e.then(void 0,r):e}var Vt=function(){function t(t){this.storeName=void 0,this.storeName=t.storeName}var r=t.prototype;return r.fetchProduct=function(t){try{return Promise.resolve(Ut(function(){return function(t){if("string"!=typeof t)throw Error('"handle" is not type of string.')}(t),Promise.resolve(Dt(function(t){return"/products/"+t+".js"}(t)))},function(t){throw lt(t),t}))}catch(t){return Promise.reject(t)}},r.fetchProductVariant=function(t){try{var r=this;return Promise.resolve(Ut(function(){var e=r.getItemIdInPlatformSpecificFormat(t);return Promise.resolve(Dt(function(t){return"/variants/"+t+".js"}(e)))},function(t){var r=new dt("Fetching product variant failed.",t);throw lt(r),r}))}catch(t){return Promise.reject(t)}},r.addItemsToCart=function(t){try{var r=this;return Promise.resolve(Ut(function(){var e=t.map(function(t){var e=t.id;return n({},s(t,["id"]),{id:r.getItemIdInPlatformSpecificFormat(e)})});return qt(e),Promise.resolve(Nt("/cart/add.js",{items:e})).then(function(){return Promise.resolve(Dt("/cart.js")).then(xt)})},function(t){throw lt(t),t}))}catch(t){return Promise.reject(t)}},r.updateItemsInCart=function(t){try{var r=this;return Promise.resolve(Ut(function(){function e(){return Promise.resolve(Dt("/cart.js")).then(xt)}var o=t[0];!function(t){if(!t)throw Error("Please provide item.");if(!t.id&&"number"!=typeof t.line)throw Error("Please provide valid item.")}(o);var i,a=(i=o)&&"object"==typeof i&&"line"in i,c=function(){if(a)return Promise.resolve(Nt("/cart/change.js",o)).then(function(){});var e=t.map(function(t){var e=t.id;return n({},s(t,["id"]),{id:r.getItemIdInPlatformSpecificFormat(e)})});qt(e);var i=e.reduce(function(t,r){return t[r.id]=r.quantity,t},{});return Promise.resolve(Nt("/cart/update.js",{updates:i})).then(function(){})}();return c&&c.then?c.then(e):e()},function(t){throw lt(t),t}))}catch(t){return Promise.reject(t)}},r.removeItemsFromCart=function(t){try{var r=this;return Promise.resolve(Ut(function(){var e=t.map(function(t){return r.getItemIdInPlatformSpecificFormat(t)});e.forEach(function(t){if(!Ot(t))throw Error('All items should have property "id" of type number.')});var n=e.reduce(function(t,r){return t[r]=0,t},{});return Promise.resolve(Nt("/cart/update.js",{updates:n})).then(function(){return Promise.resolve(Dt("/cart.js")).then(xt)})},function(t){throw lt(t),t}))}catch(t){return Promise.reject(t)}},r.updateCart=function(t){var r=t.items,e=t.note,o=t.attributes;try{var i=this;return Promise.resolve(Ut(function(){var t;if(null!=r&&r.length){var a=r.map(function(t){var r=t.id;return n({},s(t,["id"]),{id:i.getItemIdInPlatformSpecificFormat(r)})});qt(a),t=a.reduce(function(t,r){var e;return n({},t,((e={})[r.id]=r.quantity,e))},{})}return Promise.resolve(Nt("/cart/update.js",{updates:t,note:e,attributes:o})).then(function(){return Promise.resolve(Dt("/cart.js")).then(xt)})},function(t){throw lt(t),t}))}catch(t){return Promise.reject(t)}},r.getCart=function(){try{return Promise.resolve(Ut(function(){return Promise.resolve(Dt("/cart.js")).then(xt)},function(t){throw lt(t),t}))}catch(t){return Promise.reject(t)}},r.getProductTrackingData=function(t){if(!function(t){return"number"==typeof t.id}(t))throw new dt('Not valid "item" provided to getProductTrackingData method.');return{id:t.id,variantId:t.variant_id,name:t.title,brand:this.storeName,quantity:t.quantity,price:t.price||0}},r.getItemIdInPlatformSpecificFormat=function(t){return function(t){if(!t)throw new Error("id cannot be "+JSON.stringify(t));return"number"==typeof t?t:It(t)[1]}(t)},t}(),Rt=function(t){try{if(!t.ok)throw Error(t.statusText+" ("+t.status+")");return Promise.resolve(function(r,e){try{var n=Promise.resolve(t.json())}catch(t){return e()}return n&&n.then?n.then(void 0,e):n}(0,function(){return t}))}catch(t){return Promise.reject(t)}},$t=function(t){var r;return(null==(r=document.cookie.match("(^|;)\\s*"+t+"\\s*=\\s*([^;]+)"))?void 0:r.pop())||""},Mt=function(t){return function(r,e){try{return Promise.resolve(fetch(r,{method:t,headers:{Accept:"application/json","Content-Type":"application/json","x-xsrf-token":$t("XSRF-TOKEN")},body:JSON.stringify(e)})).then(Rt)}catch(t){return Promise.reject(t)}}},Lt={get:Mt("GET"),post:Mt("POST"),put:Mt("PUT"),delete:Mt("DELETE")},Kt="include=lineItems.digitalItems.options,lineItems.physicalItems.options",zt=function(t){return t?"/api/storefront/carts/"+t+"?"+Kt:"/api/storefront/carts?"+Kt},Bt=function(t,r){return"/api/storefront/carts/"+t+"/items/"+r+"?"+Kt},Ht=function(t){return"string"==typeof t},Jt=function(t){if(!t.id)throw Error('Please provide the "id" property for every item.');if("number"!=typeof t.id)throw Error('All items should have a "id" property of type number.');if(!t.quantity)throw Error('Please provide the "quantity" property for every item.');if(t.quantity<1)throw Error('Please provide the "quantity" property more than 0.');return t},Qt=function(t){var r=t.id,e=t.sku,o=t.productId,i=t.options,a=s(t,["id","sku","productId","options"]);return n({id:o,SKU:e,lineItemId:r,optionSelections:i?i.map(function(t){return{optionId:t.nameId,optionValue:t.valueId}}):i},a)},Wt=function(t){return{id:t.id,currencyCode:t.cart.currency.code,subtotalPrice:t.subtotal,totalPrice:t.grandTotal,discountAmount:t.cart.discountAmount,taxTotal:t.taxTotal,coupons:t.coupons,giftCertificates:t.giftCertificates,items:[].concat(t.cart.lineItems.physicalItems.map(Qt),t.cart.lineItems.customItems.map(Qt),t.cart.lineItems.digitalItems.map(Qt)),checkoutUrl:"/checkout"}},Gt=function(t){return{id:t.lineItemId,productId:t.id,variantId:t.variantId,quantity:t.quantity,optionSelections:t.optionSelections}};function Xt(t,r){try{var e=t()}catch(t){return r(t)}return e&&e.then?e.then(void 0,r):e}var Zt=function(){function t(t){this.storeName=void 0,this.cartId=void 0,this.addToCartInitialRequest=void 0,this.storeName=t.storeName||""}var r=t.prototype;return r.getRestApiToken=function(){try{var t="XSRF-TOKEN",r=$t(t);return r?Promise.resolve(r):Promise.resolve(Lt.get("/api/storefront/carts")).then(function(){return $t(t)})}catch(t){return Promise.reject(t)}},r.getCheckout=function(t){try{var r=this;return Promise.resolve(Xt(function(){return Promise.resolve(Lt.get(function(t){return"/api/storefront/checkouts/"+t+"?include=cart.lineItems.digitalItems.options,cart.lineItems.physicalItems.options"}(t))).then(Wt)},function(){return r.cartId=void 0,r.getCart()}))}catch(t){return Promise.reject(t)}},r.getCart=function(){try{var t=this;return Promise.resolve(t.cartId?t.getCheckout(t.cartId):Xt(function(){return Promise.resolve(Lt.get(zt())).then(function(r){var e=(r||[])[0];return t.cartId=null==e?void 0:e.id,null!=e&&e.id?t.getCheckout(t.cartId):{id:"",currencyCode:"",checkoutUrl:"/checkout",subtotalPrice:0,totalPrice:0,discountAmount:0,items:[]}})},function(t){var r=new dt("Getting cart failed.",t);throw lt(r),r}))}catch(t){return Promise.reject(t)}},r.addItemsToCart=function(t){try{var r=this;return Promise.resolve(Xt(function(){function e(){var e;return Promise.resolve(r.getRestApiToken()).then(function(){function n(){return r.cartId?r.getCheckout(r.cartId):{id:(t=e).id,currencyCode:t.currency.code,subtotalPrice:t.baseAmount,totalPrice:t.cartAmount,discountAmount:t.discountAmount,items:[].concat(t.lineItems.physicalItems.map(Qt),t.lineItems.customItems.map(Qt),t.lineItems.digitalItems.map(Qt)),checkoutUrl:"/checkout"};var t}var o,i=r.cartId?Promise.resolve(Lt.post((o=r.cartId,"/api/storefront/carts/"+o+"/items?"+Kt),{lineItems:t.map(Gt)})).then(function(t){e=t}):(r.addToCartInitialRequest=Lt.post(zt(),{lineItems:t.map(Gt)}).then(function(t){return r.cartId=null==t?void 0:t.id,t}),Promise.resolve(r.addToCartInitialRequest).then(function(t){e=t,r.addToCartInitialRequest=null}));return i&&i.then?i.then(n):n()})}!function(t){t.forEach(Jt)}(t);var n=function(){if(r.addToCartInitialRequest)return Promise.resolve(r.addToCartInitialRequest).then(function(){})}();return n&&n.then?n.then(e):e()},function(t){var r=new dt("Adding items to cart failed.",t);throw lt(r),r}))}catch(t){return Promise.reject(t)}},r.updateItemsInCart=function(t){try{var r=this;return Promise.resolve(Xt(function(){if(function(t){if(t.length>1)throw Error("The REST API does not support batch update operations on the Cart resource.");t.forEach(function(t){return function(t){if(!t.lineItemId)throw Error('Please provide the "lineItemId" property for every item.');if(!Ht(t.lineItemId))throw Error('All items should have a "lineItemId" property of type string.');return t}(Jt(t))})}(t),!r.cartId)throw"Missing Cart Id";var e=Gt(t[0]);return Promise.resolve(r.getRestApiToken()).then(function(){return Promise.resolve(Lt.put(Bt(r.cartId,e.id),{lineItem:e})).then(function(){return r.getCart()})})},function(t){var r=new dt("Update cart item failed.",t);throw lt(r),r}))}catch(t){return Promise.reject(t)}},r.removeItemsFromCart=function(t){try{var r=this;return Promise.resolve(Xt(function(){if(function(t){if(t.length>1)throw Error("The REST API does not support batch delete operations on the Cart resource.");if(!t.every(Ht))throw Error('All items should have a "lineItemId" property of type string')}(t),!r.cartId)throw"Missing Cart Id";var e=t[0];return Promise.resolve(r.getRestApiToken()).then(function(){return Promise.resolve(Lt.delete(Bt(r.cartId,e))).then(function(){return r.getCart()})})},function(t){var r=new dt("Removing items to cart failed.",t);throw lt(r),r}))}catch(t){return Promise.reject(t)}},r.getProductTrackingData=function(t){return Jt(t),{id:t.id,quantity:t.quantity,brand:this.storeName,variantId:t.variantId,name:t.name,price:t.listPrice}},r.getItemIdInPlatformSpecificFormat=function(t){if("number"==typeof t)return t;var r=Number(t);if(!isNaN(r))throw Error("itemId is not type of number and cannot be converted to a number");return r},t}(),Yt=function(t){try{return t.ok?Promise.resolve(t.text()).then(function(t){try{return JSON.parse(t).data}catch(r){return t}}):Promise.resolve({status:t.status})}catch(t){return Promise.reject(t)}},tr=function(t){return function(r,e){try{return Promise.resolve(fetch(r,{method:t,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})).then(Yt)}catch(t){return Promise.reject(t)}}},rr={get:tr("GET"),post:tr("POST"),put:tr("PUT"),delete:tr("DELETE")},er="?include=cart.line_items.physical_items.options,cart.line_items.digital_items.options,consignments.available_shipping_options",nr=function(t){return t?"/v3/carts/"+t+"?include=redirect_urls":"/v3/carts?include=redirect_urls"},or=function(t,r){return"/v3/carts/"+t+"/items/"+r+"?include=redirect_urls"},ir=function(t,r){return r?"/v3/checkouts/"+t+"/consignments/"+r+er:"/v3/checkouts/"+t+"/consignments"+er},ar=function(t){return"string"==typeof t},cr=function(t){return"object"==typeof t&&null!==t},ur=function(t){if(!t.id)throw Error('Please provide the "id" property for every item.');if("number"!=typeof t.id)throw Error('All items should have a "id" property of type number.');if(!t.quantity)throw Error('Please provide the "quantity" property for every item.');return t},sr=function(t,r){return Object.keys(t).filter(function(t){return!r.includes(t)}).join(", ")},dr=function(t){var r=t.props,e=t.actionName,n=t.availableProps;if(!cr(r))throw Error(e+" properties are not type of object.");if(!Object.keys(r).length)throw Error(e+" properties are empty object.");var o=sr(r,n);if(o)throw Error(e+' properties "'+o+'" are not allowed.')},fr=["countryCode","city","state","stateCode","email","firstName","lastName","address1","postalCode","phone"],lr=function(t){if(!cr(t))throw Error("ShippingAddress is not type of object.");if(!Object.keys(t).length)throw Error("ShippingAddress is empty object.");var r=sr(t,fr);if(r)throw Error('ShippingAddress properties "'+r+'" are not allowed.')},hr=function(t){var r;return{id:t.lineItemId,product_id:t.id,variant_id:t.variantId,quantity:t.quantity,option_selections:null==(r=t.optionSelections)?void 0:r.map(function(t){return{option_id:t.optionId,option_value:t.optionValue}})}},mr=function(t){var r=t.id,e=t.sku,o=t.product_id,i=t.list_price,a=t.sale_price,c=t.variant_id,u=t.image_url,d=t.coupon_amount,f=t.discount_amount,l=t.discounts,h=t.options,m=t.extended_list_price,p=t.extended_sale_price,v=t.is_mutable,y=t.is_require_shipping,P=t.parent_id,g=t.taxable,I=s(t,["id","sku","product_id","list_price","sale_price","variant_id","image_url","coupon_amount","discount_amount","discounts","options","extended_list_price","extended_sale_price","is_mutable","is_require_shipping","parent_id","taxable"]);return n({id:o,SKU:e,lineItemId:r,listPrice:i,salePrice:a,variantId:c,imageUrl:u,couponAmount:d,discountAmount:f,discounts:null==l?void 0:l.map(function(t){return{id:t.id,discountedAmount:t.discounted_amount}}),extendedListPrice:m,extendedSalePrice:p,isMutable:v,isShippingRequired:y,isTaxable:g,parentId:P,optionSelections:h?h.map(function(t){return{optionId:t.name_id,optionValue:t.value_id}}):h},I)},pr=function(t){return{id:t.id,type:t.type,description:t.description,imageUrl:t.image_url,cost:t.cost,transitTime:t.transit_time,additionalDescription:t.additional_description}},vr=function(t){return{id:t.id,first_name:t.firstName,last_name:t.lastName,email:t.email,address1:t.address1,city:t.city,state_or_province:t.state,state_or_province_code:t.stateCode,country_code:t.countryCode,postal_code:t.postalCode,phone:t.phone}},yr=function(t){return{item_id:t.id,quantity:t.quantity}};function Pr(t,r){try{var e=t()}catch(t){return r(t)}return e&&e.then?e.then(void 0,r):e}var gr,Ir,Cr=function(){function t(t){this.storeName=void 0,this.cartKey=void 0,this.cartId=void 0,this.cartKey="cartId-"+(t.storeId||""),this.storeName=t.storeName||"",this.cartId="undefined"!=typeof window?localStorage.getItem(this.cartKey):null}var r=t.prototype;return r.setCartId=function(t){t?localStorage.setItem(this.cartKey,t):localStorage.removeItem(this.cartKey),this.cartId=t},r.updateCustomerIdInCart=function(){try{var t=this;return Promise.resolve(Pr(function(){if(!t.cartId)throw"Missing Cart Id";var r=nr(t.cartId);return Promise.resolve(rr.put(r,{})).then(function(){})},function(t){var r=new dt("Add customer id to cart failed.",t);throw lt(r),r}))}catch(t){return Promise.reject(t)}},r.getCheckout=function(){try{var t=this;return Promise.resolve(rr.get("/v3/checkouts/"+t.cartId+er)).then(function(r){return 404===(null==r?void 0:r.status)?(t.setCartId(null),t.getCart()):{id:(e=n({},r,{cart:n({},r.cart,{redirect_urls:{checkout_url:"/checkout?cartId="+t.cartId}})})).id,currencyCode:e.cart.currency.code,subtotalPrice:e.cart.base_amount,totalPrice:e.grand_total,discountAmount:e.cart.discount_amount,consignment:null!=(o=e.consignments)&&o.length?(i=e.consignments[0],{id:i.id,shippingAddress:{id:i.shipping_address.id,firstName:i.shipping_address.first_name,lastName:i.shipping_address.last_name,email:i.shipping_address.email,company:i.shipping_address.company,address1:i.shipping_address.address1,address2:i.shipping_address.address2,city:i.shipping_address.city,state:i.shipping_address.state_or_province,stateCode:i.shipping_address.state_or_province_code,countryCode:i.shipping_address.country_code,postalCode:i.shipping_address.postal_code,phone:i.shipping_address.phone,customFields:i.shipping_address.custom_fields.map(function(t){return{id:t.field_id,value:t.field_value}})},availableShippingOptions:i.available_shipping_options.map(pr),selectedShippingOption:i.selected_shipping_option?pr(i.selected_shipping_option):null,couponDiscounts:i.coupon_discounts,discounts:i.discounts,shippingCostIncTax:i.shipping_cost_inc_tax,shippingCostExTax:i.shipping_cost_ex_tax,handlingCostIncTax:i.handling_cost_inc_tax,handlingCostExTax:i.handling_cost_ex_tax,lineItemIds:i.line_item_ids}):null,items:[].concat(e.cart.line_items.physical_items.map(mr),e.cart.line_items.custom_items.map(mr),e.cart.line_items.digital_items.map(mr),e.cart.line_items.gift_certificates.map(mr)),checkoutUrl:e.cart.redirect_urls.checkout_url,taxTotal:e.tax_total,coupons:e.coupons.map(function(t){return{id:t.id,code:t.code,couponType:t.coupon_type,discountedAmount:t.discounted_amount}})};var e,o,i})}catch(t){return Promise.reject(t)}},r.getCart=function(){try{var t=this;return Promise.resolve(Pr(function(){function r(r){return t.getCheckout()}var e=nr(t.cartId),n=function(){if(!t.cartId)return Promise.resolve(rr.post(e,{line_items:[]})).then(function(r){if(null==r||!r.id)throw"Missing Cart Id";return t.setCartId(r.id),Promise.resolve(t.updateCustomerIdInCart()).then(function(){})})}();return n&&n.then?n.then(r):r()},function(t){var r=new dt("Getting cart failed.",t);throw lt(r),r}))}catch(t){return Promise.reject(t)}},r.addItemsToCart=function(t){try{var r=this;return Promise.resolve(Pr(function(){!function(t){t.forEach(ur)}(t);var e,n=(e=r.cartId)?"/v3/carts/"+e+"/items?include=redirect_urls":"/v3/carts?include=redirect_urls";return Promise.resolve(rr.post(n,{line_items:t.map(hr)})).then(function(t){function e(){return r.getCheckout()}if(null==t||!t.id)throw"Missing Cart Id";var n=function(){if(!r.cartId)return r.setCartId(t.id),Promise.resolve(r.updateCustomerIdInCart()).then(function(){})}();return n&&n.then?n.then(e):e()})},function(t){var r=new dt("Adding items to cart failed",t);throw lt(r),r}))}catch(t){return Promise.reject(t)}},r.updateItemsInCart=function(t){try{var r=this;return Promise.resolve(Pr(function(){if(function(t){if(t.length>1)throw Error("The Management API does not support batch update operations on the Cart resource.");t.forEach(function(t){return function(t){if(!t.lineItemId)throw Error('Please provide the "lineItemId" property for every item.');if(!ar(t.lineItemId))throw Error('All items should have a "lineItemId" property of type string.');return t}(ur(t))})}(t),!r.cartId)throw"Missing Cart Id";var e=hr(t[0]),n=or(r.cartId,e.id);return Promise.resolve(rr.put(n,{line_item:e})).then(function(){return r.getCheckout()})},function(t){var r=new dt("Updating items in cart failed",t);throw lt(r),r}))}catch(t){return Promise.reject(t)}},r.removeItemsFromCart=function(t){try{var r=this;return Promise.resolve(Pr(function(){if(function(t){if(t.length>1)throw Error("The Management API does not support batch delete operations on the Cart resource.");if(!t.every(ar))throw Error('All items should have a "lineItemId" property of type string')}(t),!r.cartId)throw"Missing Cart Id";var e=or(r.cartId,t[0]);return Promise.resolve(rr.delete(e)).then(function(t){return t?r.getCheckout():(r.setCartId(null),r.getCart())})},function(t){var r=new dt("Removing items from cart failed",t);throw lt(r),r}))}catch(t){return Promise.reject(t)}},r.addShippingAddress=function(t){try{var r=this;return Promise.resolve(Pr(function(){if(function(t){dr({props:t,actionName:"AddShippingAddress",availableProps:["lineItems","shippingAddress"]});var r=t.lineItems,e=t.shippingAddress;if(!Array.isArray(r))throw Error('AddShippingAddress property "lineItems" is not type of array.');if(!r.length)throw Error('AddShippingAddress property "lineItems" is empty array.');lr(e)}(t),!r.cartId)throw"Missing Cart Id";var e=t.lineItems,n=t.shippingAddress,o=ir(r.cartId);return Promise.resolve(rr.post(o,[{line_items:e.map(yr),shipping_address:vr(n)}])).then(function(){return r.getCart()})},function(t){var r=new dt("Adding shipping address failed",t);throw lt(r),r}))}catch(t){return Promise.reject(t)}},r.updateShippingAddress=function(t){try{var r=this;return Promise.resolve(Pr(function(){if(function(t){dr({props:t,actionName:"UpdateShippingAddress",availableProps:["consignmentId","lineItems","shippingAddress"]});var r=t.consignmentId,e=t.lineItems,n=t.shippingAddress;if(!ar(r))throw Error('UpdateShippingAddress property "consignmentId" is not type of string');if(!r)throw Error('UpdateShippingAddress property "consignmentId" is empty string');if(!Array.isArray(e))throw Error('UpdateShippingAddress property "lineItems" is not type of array.');if(!e.length)throw Error('UpdateShippingAddress property "lineItems" is empty array.');lr(n)}(t),!r.cartId)throw"Missing Cart Id";var e=t.lineItems,n=t.shippingAddress,o=ir(r.cartId,t.consignmentId);return Promise.resolve(rr.put(o,{line_items:e.map(yr),shipping_address:vr(n)})).then(function(){return r.getCart()})},function(t){var r=new dt("Updating shipping address failed",t);throw lt(r),r}))}catch(t){return Promise.reject(t)}},r.getProductTrackingData=function(t){return ur(t),{id:t.id,quantity:t.quantity,brand:this.storeName,variantId:t.variantId,name:t.name,price:t.listPrice}},r.getItemIdInPlatformSpecificFormat=function(t){if("number"==typeof t)return t;var r=Number(t);if(!isNaN(r))throw Error("itemId is not type of number and cannot be converted to a number");return r},t}(),wr={shopify:(gr={},gr.graphql=function(t){if(!Tt(t))throw new Error("Invalid Store Configuration for Shopify.");var r=t.storeToken||process.env.STORE_TOKEN||"",e=new Et({storeDomain:t.storeDomain||"",platformDomain:t.storePlatformDomain||"",storefrontAccessToken:r},{storeName:t.storeName||"",storeId:t.storeId||"",sharedCheckoutDomains:t.sharedCheckoutDomains});return new At({platform:e})},gr.rest=function(t){var r=new Vt({storeName:t.storeName||""});return new At({platform:r})},gr),big_commerce:(Ir={},Ir.rest=function(t){return new At({platform:new Zt(t)})},Ir.management=function(t){return new At({platform:new Cr(t)})},Ir)};function br(t,r){try{var e=t()}catch(t){return r(t)}return e&&e.then?e.then(void 0,r):e}var _r,kr=function(){function t(t){var r,e=t.platform;this.platform=void 0,this.productInventoryUrl=void 0,this.platform=e,this.productInventoryUrl=(r=process.env.SITE_DOMAIN||"")?new URL("/data/productInventory.json?v=2","https://"+r).href:"/data/productInventory.json?v=2"}var r=t.prototype;return r.fetchInventory=function(){try{var t=this;return Promise.resolve(br(function(){return Promise.resolve(fetch(t.productInventoryUrl)).then(function(t){return t.json()})},function(){return Promise.resolve({products:{},productVariants:{}})}))}catch(t){return Promise.reject(t)}},r.refreshInventoryOnInterval=function(t){var r=this,e=Number(process.env.NEXT_PRODUCT_INVENTORY_REFRESH_INTERVAL||process.env.PRODUCT_INVENTORY_REFRESH_INTERVAL);if(!isNaN(e))return window.setInterval(function(){try{var e=br(function(){return Promise.resolve(r.fetchInventory()).then(function(r){t(r)})},function(){});return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(t){return Promise.reject(t)}},Number(e)||6e4)},r.fetchProductsInventory=function(t,r){return this.platform.fetchProductsInventory(t,r)},r.refreshPlatformInventory=function(t){var r=this,e=t.ids,n=t.productType,o=t.callback,i=Number(t.interval);if(i&&!(i<0)){var a=Math.pow(2,31)-1;return window.setInterval(function(){try{var t=br(function(){return Promise.resolve(r.fetchProductsInventory(e,n)).then(function(t){o(t)})},function(){});return Promise.resolve(t&&t.then?t.then(function(){}):void 0)}catch(t){return Promise.reject(t)}},i<a?i:a)}},r.isProductAvailableForSale=function(t,r){return this.platform.isProductAvailableForSale(t,r)},r.getProductQuantity=function(t,r){return this.platform.getProductQuantity(t,r)},r.getProductMinOrder=function(t,r){return this.platform.getProductMinOrder(t,r)},r.getProductMaxOrder=function(t,r){return this.platform.getProductMaxOrder(t,r)},r.getProductPrice=function(t,r){return this.platform.getProductPrice(t,r)},t}(),Sr={shopify:function(t,r){return vt(t)?t:{Product:yt(t),ProductVariant:Pt(t)}[r]},big_commerce:function(t){if("number"==typeof t)return t;var r=Number(t);if(!isNaN(r))throw Error("itemId is not type of number and cannot be converted to a number");return r}},Er=function(t,r,e){return void 0===e&&(e="Product"),Sr[t](r,e)},jr=j(_r||(_r=f(["\n  query getProductInventoryData($ids: [ID!]!) {\n    nodes(ids: $ids) {\n      ... on Product {\n        id\n        availableForSale\n        quantityAvailable: totalInventory\n      }\n      ... on ProductVariant {\n        id\n        availableForSale\n        quantityAvailable\n        price\n      }\n    }\n  }\n"]))),Ar=function(t){try{if(!t.ok)throw Error(t.statusText+" "+t.status);return Promise.resolve(function(r,e){try{var n=Promise.resolve(t.json())}catch(t){return e()}return n&&n.then?n.then(void 0,e):n}(0,function(){return t}))}catch(t){return Promise.reject(t)}},Tr=function(){function t(t){if(this.platformDomain=void 0,this.storeDomain=void 0,this.defaultHeaders=void 0,this.apiUrl=void 0,!Tt(t))throw new Error("Invalid Store Configuration for Shopify.");var r=t.storeToken,e=t.storeDomain;this.platformDomain=t.storePlatformDomain,this.storeDomain=e,this.defaultHeaders={"X-Shopify-Storefront-Access-Token":r||"","Accept-Language":"*","Content-Type":"application/json",Accept:"application/json"},this.apiUrl=(this.platformDomain?"https://"+this.platformDomain:this.storeDomain?"https://"+this.storeDomain:"")+"/api/2021-07/graphql"}return t.prototype.fetchInventoryByProductIds=function(t){return function(t,r,e){try{return Promise.resolve(fetch(t,{method:"POST",headers:r,body:e})).then(Ar)}catch(t){return Promise.reject(t)}}(this.apiUrl,this.defaultHeaders,jr({ids:t}))},t}();function Fr(t){if(r=t,!Array.isArray(r)||!Boolean(r.length))throw new Error("Ids must be an array");var r;if(!t.every(function(t){return"string"==typeof(e=t)&&Boolean(e)||"number"==typeof(r=t)&&r>0;var r,e}))throw new Error("Ids must be an array of strings or numbers");if(t.length>250)throw new Error("Max number of ids is 250")}function Dr(t,r){try{var e=t()}catch(t){return r(t)}return e&&e.then?e.then(void 0,r):e}var Nr=function(){function t(t){var r=this;this.client=void 0,this.inventory=void 0,this.getStorefrontIdsMap=function(t,e){return t.reduce(function(t,n){return t[r.getItemIdInPlatformSpecificFormat(n,e)]=n,t},{})},this.modifyInventoryResponse=function(t,e){return t.reduce(function(t,n){var o,i,a=n.id,c=e[a];return c&&(t[c]={price:n.price,availableForSale:n.availableForSale,quantity:n.quantityAvailable,minOrder:null==(o=r.getProductFromInventory(a))?void 0:o.minOrder,maxOrder:null==(i=r.getProductFromInventory(a))?void 0:i.maxOrder}),t},{})},this.client=new Tr(t),this.inventory=t.inventory||{}}var r=t.prototype;return r.getProductFromInventory=function(t){var r,e;return(null==(r=this.inventory.products)?void 0:r[t])||(null==(e=this.inventory.productVariants)?void 0:e[t])},r.getItemIdInPlatformSpecificFormat=function(t,r){return Er("shopify",t,r)},r.fetchProductsInventory=function(t,r){try{var e=this;return Promise.resolve(Dr(function(){Fr(t);var n=e.getStorefrontIdsMap(t,r),o=Object.keys(n);return Promise.resolve(e.client.fetchInventoryByProductIds(o)).then(function(t){return e.modifyInventoryResponse(t.data.nodes,n)})},function(t){var r=new dt("Could not fetch inventory data from platform",t);throw lt(r),r}))}catch(t){return Promise.reject(t)}},r.isProductAvailableForSale=function(t,r){try{var e=this;return Promise.resolve(Dr(function(){return Promise.resolve(e.fetchProductsInventory([t],r)).then(function(r){var e;return Boolean(null==(e=r[t])?void 0:e.availableForSale)})},function(t){var r=new dt("Could not fetch product availability",t);throw lt(r),r}))}catch(t){return Promise.reject(t)}},r.getProductMinOrder=function(t,r){try{try{var e=this.getItemIdInPlatformSpecificFormat(t,r),n=this.getProductFromInventory(e);return Promise.resolve(null==n?void 0:n.minOrder)}catch(t){var o=new dt("Could not fetch min order",t);throw lt(o),o}}catch(t){return Promise.reject(t)}},r.getProductMaxOrder=function(t,r){try{try{var e=this.getItemIdInPlatformSpecificFormat(t,r),n=this.getProductFromInventory(e);return Promise.resolve(null==n?void 0:n.maxOrder)}catch(t){var o=new dt("Could not fetch max order",t);throw lt(o),o}}catch(t){return Promise.reject(t)}},r.getProductQuantity=function(t,r){try{var e=this;return Promise.resolve(Dr(function(){return Promise.resolve(e.fetchProductsInventory([t],r)).then(function(r){var e;return null==(e=r[t])?void 0:e.quantity})},function(t){var r=new dt("Could not fetch product quantity",t);throw lt(r),r}))}catch(t){return Promise.reject(t)}},r.getProductPrice=function(t,r){try{var e=this;return Promise.resolve(Dr(function(){return Promise.resolve(e.fetchProductsInventory([t],r)).then(function(r){var e;return null==(e=r[t])?void 0:e.price})},function(t){var r=new dt("Could not fetch product price",t);throw lt(r),r}))}catch(t){return Promise.reject(t)}},t}(),Or=function(t){try{if(!t.ok)throw Error(t.statusText+" "+t.status);return Promise.resolve(t.json())}catch(t){return Promise.reject(t)}},qr=["id","price","inventory_level","inventory_warning_level","inventory_tracking","total_sold","availability","availability_description","order_quantity_minimum"].join(",");function xr(t,r){try{var e=t()}catch(t){return r(t)}return e&&e.then?e.then(void 0,r):e}var Ur=function(){function t(){}var r=t.prototype;return r.getItemIdInPlatformSpecificFormat=function(t){return Er("big_commerce",t)},r.getStorefrontIdsMap=function(t){var r=this;return t.reduce(function(t,e){return t[String(r.getItemIdInPlatformSpecificFormat(e))]=e,t},{})},r.modifyInventoryResponse=function(t,r){return t.reduce(function(t,e){var n=r[e.id];return n&&(t[n]={availableForSale:"available"===e.availability,inventoryTracking:"none"!==e.inventory_tracking,quantity:e.inventory_level,minOrder:e.order_quantity_minimum,maxOrder:e.order_quantity_maximum,price:e.price}),t},{})},r.fetchProductsInventory=function(t){try{var r=this;return Promise.resolve(xr(function(){Fr(t);var e,n=r.getStorefrontIdsMap(t),o=Object.keys(n);return Promise.resolve((e=o,function(t,r){try{return Promise.resolve(fetch(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(void 0)})).then(Or)}catch(t){return Promise.reject(t)}}(function(t){return"/v3/catalog/products?id:in="+t+"&include_fields="+qr}(e.join(","))))).then(function(t){return r.modifyInventoryResponse(t.data,n)})},function(t){var r=new dt("Could not fetch inventory data from platform",t);throw lt(r),r}))}catch(t){return Promise.reject(t)}},r.isProductAvailableForSale=function(t){try{var r=this;return Promise.resolve(xr(function(){return Promise.resolve(r.fetchProductsInventory([t])).then(function(r){var e;return Boolean(null==(e=r[t])?void 0:e.availableForSale)})},function(t){var r=new dt("Could not fetch product availability",t);throw lt(r),r}))}catch(t){return Promise.reject(t)}},r.getProductQuantity=function(t){try{var r=this;return Promise.resolve(xr(function(){return Promise.resolve(r.fetchProductsInventory([t])).then(function(r){var e=r[t]||{};if(e.inventoryTracking)return e.quantity;console.warn("Inventory tracking is not enabled for this product")})},function(t){var r=new dt("Could not fetch product quantity",t);throw lt(r),r}))}catch(t){return Promise.reject(t)}},r.getProductMinOrder=function(t){try{var r=this;return Promise.resolve(xr(function(){return Promise.resolve(r.fetchProductsInventory([t])).then(function(r){var e;return null==(e=r[t])?void 0:e.minOrder})},function(t){var r=new dt("Could not fetch min order",t);throw lt(r),r}))}catch(t){return Promise.reject(t)}},r.getProductMaxOrder=function(t){try{var r=this;return Promise.resolve(xr(function(){return Promise.resolve(r.fetchProductsInventory([t])).then(function(r){var e;return null==(e=r[t])?void 0:e.maxOrder})},function(t){var r=new dt("Could not fetch max order",t);throw lt(r),r}))}catch(t){return Promise.reject(t)}},r.getProductPrice=function(t){try{var r=this;return Promise.resolve(xr(function(){return Promise.resolve(r.fetchProductsInventory([t])).then(function(r){var e;return null==(e=r[t])?void 0:e.price})},function(t){var r=new dt("Could not fetch product price",t);throw lt(r),r}))}catch(t){return Promise.reject(t)}},t}(),Vr=function(t){return function(r){return new kr({platform:new t(r)})}},Rr={shopify:Vr(Nr),big_commerce:Vr(Ur)};function $r(t,r){return"object"==typeof t?n({},t,{type:null!=t.type?t.type:r}):{id:t,type:r}}var Mr={id:"",items:[],inventory:{products:void 0,productVariants:void 0,status:"loading"},currencyCode:"",subtotalPrice:"",totalPrice:"",discountAmount:null,isCartShown:!1,checkoutUrl:"",currencies:[],consignment:null},Lr=e.default.createContext(Mr),Kr=e.default.createContext({}),zr=e.default.createContext({});function Br(t,r){switch(r.type){case"initial load":case"update cart":return n({},t,r.payload);case"show cart":return n({},t,{isCartShown:!0});case"hide cart":return n({},t,{isCartShown:!1});case"update inventory":return n({},t,{inventory:n({},r.payload)});case"add currencies":return n({},t,{currencies:r.payload});default:throw new Error("Wrong action type sent to cartReducer.")}}function Hr(t,r,e,n,o){return{fetchProduct:function(t){try{var e=$r(t,"Product"),n=e.id;return Promise.resolve("Product"===e.type?r.fetchProduct(n):r.fetchProductVariant(n))}catch(t){return Promise.reject(t)}},addItems:function(e){try{return Promise.resolve(r.addItemsToCart(e)).then(function(r){return Jr(t,r),r})}catch(t){return Promise.reject(t)}},updateItems:function(e){try{return Promise.resolve(r.updateItemsInCart(e)).then(function(r){return Jr(t,r),r})}catch(t){return Promise.reject(t)}},removeItems:function(e){try{return Promise.resolve(r.removeItemsFromCart(e)).then(function(r){return Jr(t,r),r})}catch(t){return Promise.reject(t)}},updateCart:function(e){try{return Promise.resolve(r.updateCart(e)).then(function(r){return Jr(t,r),r})}catch(t){return Promise.reject(t)}},showCart:function(){t({type:"show cart"})},hideCart:function(){t({type:"hide cart"})},getProductTrackingData:function(t){return r.getProductTrackingData(t)},isProductInInventory:function(){console.warn("\n\tDeprecation Warning:\n\t'isProductInInventory is deprecated.\n\tPlease use 'isProductAvailableForSale()' instead.\n\t\t\t")},isProductAvailableForSale:function(t){var r=$r(t,o);return n.isProductAvailableForSale(r.id,r.type)},getProductQuantity:function(t){var r=$r(t,o);return n.getProductQuantity(r.id,r.type)},getProductMinOrder:function(t){var r=$r(t,o);return n.getProductMinOrder(r.id,r.type)},getProductMaxOrder:function(t){var r=$r(t,o);return n.getProductMaxOrder(r.id,r.type)},getProductPrice:function(t){var r=$r(t,o);return n.getProductPrice(r.id,r.type)},getCurrencies:function(){try{return Promise.resolve(r.fetchCurrencies()).then(function(r){return t({type:"add currencies",payload:r}),r})}catch(t){return Promise.reject(t)}},selectCurrency:function(n){try{var o=e.current.items.map(function(t){return{quantity:t.quantity,variantId:t.variant.id,customAttributes:t.customAttributes}});return Promise.resolve(r.selectCurrency({currency:n,lineItems:o})).then(function(r){return Jr(t,r),r})}catch(t){return Promise.reject(t)}},getShippingQuotes:function(n){try{var o,i=function(){var r,e;return Jr(t,o),null==(r=o)||null==(e=r.consignment)?void 0:e.availableShippingOptions},a=e.current,c=a.consignment,u=a.items.map(function(t){return{id:t.id,quantity:t.quantity}}),s=null!=c&&c.id?Promise.resolve(r.updateShippingAddress({consignmentId:c.id,lineItems:u,shippingAddress:n})).then(function(t){o=t}):Promise.resolve(r.addShippingAddress({lineItems:u,shippingAddress:n})).then(function(t){o=t});return Promise.resolve(s&&s.then?s.then(i):i())}catch(t){return Promise.reject(t)}}}}function Jr(t,r){t({type:"update cart",payload:r})}function Qr(){return e.default.useContext(Lr)}function Wr(){return e.default.useContext(Kr)}exports.CartProvider=function(r){var o=r.children,i=r.platform,a=r.storeConfig,c=a.platformApiType,u=void 0===c?"graphql":c;!function(t){var r=t.platform,e=t.platformApiType;if(!function(t){return k.includes(t)}(r))throw Error("Unsupported platform provided to CartProvider.");if(!function(t){return S.includes(t)}(e))throw Error("Unsupported platformApiType provided to CartProvider.");if("big_commerce"===r&&"graphql"===e)throw Error("The BigCommerce checkout only supports the REST API.")}({platform:i,platformApiType:u});var s=wr[i][u];if(!s)return null;var d=Rr[i](a);if(!d)return null;var f=e.default.useState(function(){return s(a)})[0],l=e.default.useReducer(Br,Mr),h=l[0],m=l[1],p=t.useRef(Mr),v={shopify:"ProductVariant",big_commerce:"Product"}[i];return e.default.useEffect(function(){p.current=h},[h]),e.default.useEffect(function(){var t=void 0,r=f.getCart(),e=d.fetchInventory();return Promise.all([r,e]).then(function(r){var e=r[1];m({type:"initial load",payload:n({},r[0],{inventory:{products:null==e?void 0:e.products,productVariants:null==e?void 0:e.productVariants,status:"loaded"}})}),t=d.refreshInventoryOnInterval(function(t){m({type:"update inventory",payload:{products:t.products,productVariants:t.productVariants,status:"loaded"}})})}).catch(function(t){m({type:"initial load",payload:n({},t,{inventory:{products:null,productVariants:null,status:"error"}})})}),function(){null!=t&&clearInterval(t)}},[]),e.default.createElement(Lr.Provider,{value:h},e.default.createElement(Kr.Provider,{value:Hr(m,f,p,d,v)},e.default.createElement(zr.Provider,{value:d},o)))},exports.useCart=function(){return[Qr(),Wr()]},exports.useCartActions=Wr,exports.useCartState=Qr,exports.useInventory=function(r){var o=r||{},i=o.ids,a=o.productType,c=o.interval,u=e.default.useContext(zr),s=t.useState({products:{},loading:Boolean(null==i?void 0:i.length)}),d=s[0],f=s[1],l=t.useRef(i),h=t.useRef(d.loading);h.current=d.loading;var m=t.useMemo(function(){var t;return i&&l.current&&(null==(t=l.current)?void 0:t.length)===(null==i?void 0:i.length)&&(null==l.current.every?void 0:l.current.every(function(t){return null==i.includes?void 0:i.includes(t)}))?l.current:(l.current=i,i)},[i]),p=t.useCallback(function(t){f({products:t,loading:!1})},[f]);return t.useEffect(function(){if(null!=m&&m.length&&(h.current||f(function(t){return n({},t,{loading:!0})}),function(){try{Promise.resolve(u.fetchProductsInventory(i,a)).then(function(t){p(t)})}catch(t){return Promise.reject(t)}}(),c)){var t=u.refreshPlatformInventory({ids:m,interval:c,productType:a,callback:p});return function(){clearInterval(t)}}},[m,a]),d};
